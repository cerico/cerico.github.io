<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title data-react-helmet="true">cerico | How to build a JS Router</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font-size:112.5%;line-height:1.65em;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:normal;word-wrap:break-word;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:2.25rem;line-height:2.475rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.62671rem;line-height:2.475rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.38316rem;line-height:1.65rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.65rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.85028rem;line-height:1.65rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.78405rem;line-height:1.65rem;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}ul{margin-left:1.65rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.65rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;font-size:0.85rem;line-height:1.42;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;padding:1.65rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;font-size:1rem;line-height:1.65rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}blockquote{margin-left:1.65rem;margin-right:1.65rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.65rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.65rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.65rem;margin-bottom:calc(1.65rem / 2);margin-top:calc(1.65rem / 2);}li > ul{margin-left:1.65rem;margin-bottom:calc(1.65rem / 2);margin-top:calc(1.65rem / 2);}code{font-size:0.85rem;line-height:1.65rem;}kbd{font-size:0.85rem;line-height:1.65rem;}samp{font-size:0.85rem;line-height:1.65rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:tnum;padding-left:1.1rem;padding-right:1.1rem;padding-top:0.825rem;padding-bottom:calc(0.825rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:Consolas,"Roboto Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;}pre code{background:none;line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}</style><link href="//fonts.googleapis.com/css?family=Roboto:400,400i,700" rel="stylesheet" type="text/css"/><style>@import url(https://fonts.googleapis.com/css?family=Raleway);@import url(https://fonts.googleapis.com/css?family=Work+Sans);body{background-color:#fff!important}@media (min-width:660px){.mini{display:none}}@media (max-width:660px){.leftside{display:none}.intro .text-col{width:90%!important;max-width:none!important}.intro .text-col,.mini{margin-left:5%!important}.mini{width:90%;display:inline-block!important;margin-bottom:-54px;z-index:900}.mini a{padding-bottom:1.25rem;color:"#1e1e1e";display:inline-block}.mini p{float:left}.mini .linx{display:inline-block!important;margin-top:20px}}*{border:0;box-sizing:border-box;-webkit-font-smoothing:antialiased;font-weight:400;margin:0;outline:0;padding:0;text-decoration:none;text-rendering:optimizeLegibility}body{display:block}.h3,.h4,h3,h4{line-height:24px;line-height:1.5rem}.h3,h3{font-size:21.328px;font-size:1.333rem;font-family:Antonio,Open Sans,Helvetica Neue,Helvetica,Arial,"sans-serif";font-weight:700;text-transform:uppercase;margin-bottom:8px;margin-bottom:.5rem}.hero h1{margin:0}.h1,.h2,h1,h2{font-weight:300;text-transform:uppercase;margin-bottom:16px;margin-bottom:1rem}.h1,h1{font-size:37.89749px;font-size:37.897px;font-size:2.36859rem;line-height:48px;line-height:3rem}.hero__div{position:absolute;bottom:0;left:0;width:100%;height:auto;margin-bottom:-1px}html{color:#000;line-height:1.5;font-family:Open Sans,Helvetica Neue,Helvetica,Arial,"sans-serif";font-size:16px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-size:18px}body{background-color:#1e1e1e;font-family:Work Sans,sans-serif;line-height:1.45;font-size:20px;font-size:1.25rem;text-rendering:optimizeLegibility;-webkit-font-variant-ligatures:common-ligatures;font-variant-ligatures:common-ligatures;-webkit-font-feature-settings:"kern","liga";font-feature-settings:"kern","liga","liga","clig","kern";-webkit-font-kerning:normal;font-kerning:normal}body a{-webkit-text-decoration-skip:ink;text-decoration-skip:ink}@media only screen and (max-width:600px){body{font-size:1.05rem}}@media only screen and (max-width:400px){body{font-size:1rem}}.font-smoothing{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.marvin .wrapper{width:90%;max-width:960px;max-width:60rem;margin:auto}.marvin .intro{padding-top:32px;padding-top:2rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:-.01em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.marvin .intro .text-col{max-width:624px;max-width:39rem;width:60%;margin-right:18%}.marvin .intro .leftside{max-width:160px;max-width:10rem;width:5%}.marvin .intro .text-col p{padding-bottom:20px;padding-bottom:1.25rem;color:"#1e1e1e"}.hero{background:#b1d8e4;padding:32px 64px 48px;padding:2rem 4rem 3rem;position:relative}body{margin-top:-47px;background:#fcf8ed!important}.hero__div{position:absolute;bottom:0;left:0;width:100%;height:auto;margin-bottom:-1px}.hero h1,h2,h3,h4,h5,h6{line-height:1.2;font-family:-apple-system,\.SFNSText-Regular,San Francisco,Roboto,Segoe UI,Helvetica Neue,Lucida Grande,Arial,sans-serif;font-weight:700;color:#494e52}@media (min-width:660px){.schedule #schedule-times .schedule-item{max-width:680px;margin:0 auto;min-height:200px;padding-left:180px;position:relative;padding-top:0;border:0;text-align:left;border-top:3px solid #fff2de;padding-top:20px}.schedule-item{max-width:680px;margin:0 auto;padding-left:181px;position:relative;padding-top:0;border:0;text-align:left;border-top:3px solid #b1d8e4;padding-top:20px}.skew{font-size:1.6rem}schedule-item h2{font-size:1.8em;margin-bottom:.25em;font-family:Work Sans;font-weight:400}.timeskew{position:absolute;top:0;left:0;font-size:1.8em;margin:0;width:150px;text-align:center;font-size:1rem;color:gray;margin-bottom:.165rem;margin-left:0;padding-top:20px;text-align:left}}.hljs{display:block;overflow-x:auto;padding:.5em;background:#000;color:#f8f8f8}.hljs-comment,.hljs-quote{color:#aeaeae;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#e28964}.hljs-string{color:#65b042}.hljs-subst{color:#daefa3}.hljs-link,.hljs-regexp{color:#e9c062}.hljs-name,.hljs-section,.hljs-tag,.hljs-title{color:#89bdff}.hljs-class .hljs-title,.hljs-doctag{text-decoration:underline}.hljs-bullet,.hljs-number,.hljs-symbol{color:#3387cc}.hljs-params,.hljs-template-variable,.hljs-variable{color:#3e87e3}.hljs-attribute{color:#cda869}.hljs-meta{color:#8996a8}.hljs-formula{background-color:#0e2231;color:#f8f8f8;font-style:italic}.hljs-addition{background-color:#253b22;color:#f8f8f8}.hljs-deletion{background-color:#420e09;color:#f8f8f8}.hljs-selector-class{color:#9b703f}.hljs-selector-id{color:#8b98ab}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}*{font-family:Work Sans,sans-serif}pre{background:#000;color:#f8f8f8}pre *{font-family:Consolas,Roboto Mono,Liberation Mono,Menlo,Courier,monospace}h1,h2{text-rendering:optimizeLegibility}.inverse-topper,.topper{font-size:64px;font-weight:300;letter-spacing:-2px;line-height:1em;margin:.5em 0}.inverse-topper{color:#494e52;font-size:1.7em}.hero h3{font-size:.81em;margin-top:14px;margin-top:1rem}.inverse-topper:after{content:" ";border-bottom:3px solid #fff;border-width:50%;display:block;width:98px;width:7rem;margin-top:8px;margin-top:7px;margin-top:.5rem}.markdown{margin-top:23.8px;margin-top:1.7rem}body{font-family:Work Sans,sans-serif;font-weight:300;margin:0;margin-bottom:126px;margin-bottom:9rem}li a{text-decoration:none}header[role=banner]{background:#6495ed;padding:22px 0 0;margin-top:12px;height:112px;height:8rem;text-align:center;color:#fff}header[role=banner] h1{margin:0}header[role=banner] h3{font-size:37.8px;font-size:2.7rem}header{font-family:Raleway,sans-serif;font-weight:100;color:#6495ed;text-rendering:optimizeLegibility;line-height:1;margin-top:0;font-family:-apple-system,\.SFNSText-Regular,San Francisco,Roboto,Segoe UI,Helvetica Neue,Lucida Grande,Arial,sans-serif;margin-bottom:15px;color:#607d8b;font-weight:700}a{outline:none;transition:color .3s ease;text-decoration:none;color:#6495ed}h1{font-weight:300;font-size:70px;font-size:5rem;margin:0;color:#6495ed;font-weight:100;color:#442f34;text-rendering:optimizeLegibility;line-height:1;text-transform:none;line-height:1.2}h3{font-size:37.8px;font-size:2.7rem;font-weight:300;line-height:1}html{font-size:14px}article,main{display:block}.content{max-width:900px}.content,.page-content{margin:14px auto;margin:1rem auto}.page-content{max-width:720px;color:"#1e1e1e1"}.page-content p{color:"#1e1e1e"!important}.post{position:relative;width:80%;margin:42px auto;margin:3rem auto;padding-bottom:42px;padding-bottom:3rem;border-bottom:1px solid #ccc;word-break:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.post-meta{display:inline-block;margin:0 0 5px;font-size:28px;font-size:2rem;color:#9eabb3;color:#ff0}.post-meta a{color:#9eabb3;text-decoration:none}.post-title{margin:0;color:#6495ed}h2{font-size:35px;font-size:2.5rem}section{max-width:960px;margin:auto}.post-excerpt p{margin:22.4px 0 0;margin:1.6rem 0 0;line-height:22.4px;line-height:1.6rem}dl,ol,p,ul{font-size:17.92px;font-size:1.28rem;line-height:1.6;color:"#1e1e1e"}header h1,header h3{color:#fff}header[role=hero]{padding:14px 0 56px;padding:1rem 0 4rem;background-color:#306ffd;background-image:linear-gradient(60deg,#306efe,#003ab7);text-align:center;color:#fff;position:relative}.h3,.h4,h3,h4{line-height:21px;line-height:1.5rem}.h3,h3{font-size:21.328px;font-size:18.662px;font-size:1.333rem;font-weight:700;text-transform:uppercase;margin-bottom:7px;margin-bottom:.5rem}h1:after{content:"";border-bottom:3px solid #6495ed;width:100%}.intro{padding-top:28px;padding-top:2rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:-.01em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.wrapper{width:90%;max-width:840px;max-width:60rem;margin:auto}.intro .leftside{max-width:140px;max-width:10rem;width:20%}.intro .text-col{max-width:546px;max-width:39rem;width:60%;margin-right:10%}.cerico{color:#eadfc1}.authorbio{color:#7e9aa3}.headroom-wrapper{border-top:2px solid #eadfc1}@media (max-width:660px){.authorbio{display:none}}.page-content a{color:#ff7980;text-decoration:underline}</style></head><body><div id="react-mount"><div data-reactroot="" data-reactid="1" data-react-checksum="-1533847594"><div style="position:relative;" data-reactid="2"><div role="hero" class="hero" data-reactid="3"><a class="inverse-topper" href="/" data-reactid="4">Cerico</a><h3 data-reactid="5">Javascript, Docker, Elixir, Nginx, and other fun and games</h3></div><svg width="100%" height="47px" viewBox="0 0 1440 47" version="1.1" xmlns="http://www.w3.org/2000/svg" class="hero__div" preserveAspectRatio="none" data-reactid="6"><defs data-reactid="15" data-reactid="7"></defs><g id="Page-1" stroke="none" stroke-width="1" fill="#fff" fill-rule="evenodd" data-reactid="16" data-reactid="8"><path d="M0,0.0577405639 C117.504588,18.44359 269.602477,22.1720696 456.293666,11.2431795 C562.076057,5.05068514 730.784198,0.911127653 885.297232,3.27366179 C1157.17617,7.43074321 1386.98062,21.3276838 1440,38.3891927 L1440,46.9388979 L0,46.9388979 L0,0.0577405639 Z" id="Path-9" fill="#FCF8ED" data-reactid="17" data-reactid="9"></path></g></svg></div><div class="clear-both" data-reactid="10"></div><div class="mini" data-reactid="11"><p style="margin-bottom:0.33rem;" data-reactid="12"><a style="display:inline-block;" href="/about/" data-reactid="13"><img src="https://s3.eu-west-2.amazonaws.com/io1937/ghpages/linkedin.jpg" style="float:left;margin-top:0;margin-bottom:0;margin-right:0.4125rem;width:6.6rem;height:6.6rem;border-radius:50%;border:1px gray solid;" data-reactid="14"/></a><div style="display:inline-block;" data-reactid="15"><span class="authorbio" data-reactid="16">garethrobertlee</span><a href="/about/" data-reactid="17"></a></div></p><div class="linx" data-reactid="18"><div class="linx" data-reactid="19"><span data-reactid="20"><a style="color:#7e9aa3;" href="/" data-reactid="21"><!-- react-text: 22 -->Posts  <!-- /react-text --><br data-reactid="23"/></a><a style="color:#7e9aa3;" href="/about/" data-reactid="24"><!-- react-text: 25 -->About  <!-- /react-text --><br data-reactid="26"/></a></span><a style="color:#7e9aa3;" href="mailto:garethrobertlee@gmail.com?Subject=Hello" target="blank_" data-reactid="27">Contact</a></div></div></div><section class="intro wrapper gradient-links" data-reactid="28"><div class="leftside" data-reactid="29"><p style="margin-bottom:0.33rem;" data-reactid="30"><a style="display:inline-block;" href="/about/" data-reactid="31"><img src="https://s3.eu-west-2.amazonaws.com/io1937/ghpages/linkedin.jpg" style="float:left;margin-top:0;margin-bottom:0;margin-right:0.4125rem;width:6.6rem;height:6.6rem;border-radius:50%;border:1px gray solid;" data-reactid="32"/></a><div style="display:inline-block;" data-reactid="33"><span class="authorbio" data-reactid="34">garethrobertlee</span><a href="/about/" data-reactid="35"></a></div></p><div class="linx" data-reactid="36"><div class="linx" data-reactid="37"><span data-reactid="38"><a style="color:#7e9aa3;" href="/" data-reactid="39"><!-- react-text: 40 -->Posts  <!-- /react-text --><br data-reactid="41"/></a><a style="color:#7e9aa3;" href="/about/" data-reactid="42"><!-- react-text: 43 -->About  <!-- /react-text --><br data-reactid="44"/></a></span><a style="color:#7e9aa3;" href="mailto:garethrobertlee@gmail.com?Subject=Hello" target="blank_" data-reactid="45">Contact</a></div></div></div><div class="text-col" data-reactid="46"><section id="schedule-times" data-reactid="47"><div class="markdown page-content" data-reactid="48"><!-- react-empty: 49 --><div data-reactid="50"><div style="font-size:1rem;color:#9EABB3;margin-bottom:1px;text-align:right;" data-reactid="51"><!-- react-text: 52 -->26 Aug 2017<!-- /react-text --><!-- react-text: 53 --> in <!-- /react-text --><span style="display:inline;" data-reactid="54"><span style="margin-right:8px;line-height:1.2;display:inline-block;" data-reactid="55"><a style="color:#7e9aa3;display:inline-block;font-size:1rem;" href="/tags/#javascript" data-reactid="56">Javascript</a><span data-reactid="57">,</span></span><span style="margin-right:8px;line-height:1.2;display:inline-block;" data-reactid="58"><a style="color:#7e9aa3;display:inline-block;font-size:1rem;" href="/tags/#es6" data-reactid="59">ES6</a><span data-reactid="60"></span></span></span></div></div><h1 style="font-size:2.2rem;margin-bottom:1rem;margin-top:2rem;" data-reactid="61">How to build a JS Router</h1><div data-reactid="62"><p>In this application we’ll learn how to build a client-side router with vanilla Javascript. We have 3 main requirements</p>
<ul>
<li>It should link us to a new page without a server visit</li>
<li>It should handle the back button</li>
<li>It should handle page refreshes and direct linking</li>
</ul>
<hr>
<h3>Pre-requisites.</h3>
<p>Npm and Node. These are the versions I’m running</p>
<pre><code>➜  ~ <span class="hljs-keyword">node</span> <span class="hljs-title">-v</span>
v8.<span class="hljs-number">6.0</span>
➜  ~ npm -v
<span class="hljs-number">5.3</span>.<span class="hljs-number">0</span>
</code></pre>
<hr>
<h3>TLDR / Repo</h3>
<p>Repo is at <a href="https://github.com/cerico/how-to-js-router">https://github.com/cerico/how-to-js-router</a></p>
<hr>
<h3>Stage One - Initial Setup</h3>
<pre><code>➜  how-to-js-router git:(dev) tree
.
├── package-lock<span class="hljs-selector-class">.json</span>
├── package<span class="hljs-selector-class">.json</span>
├── src
│   ├── index<span class="hljs-selector-class">.html</span>
│   └── js
│       └── index<span class="hljs-selector-class">.js</span>
└── webpack
    └── webpack<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span>

<span class="hljs-number">3</span> directories, <span class="hljs-number">5</span> files
</code></pre>
<pre><code>package<span class="hljs-selector-class">.json</span>

  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"dev"</span>: <span class="hljs-string">"webpack-dev-server --config webpack/webpack.config.js --open"</span>
  },
   <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"webpack"</span>: <span class="hljs-string">"^3.5.5"</span>,
    <span class="hljs-string">"webpack-dev-server"</span>: <span class="hljs-string">"^2.7.1"</span>
  }
</code></pre>
<p>We just need webpack and webpack-dev-server, so jump ahead and install those with npm install.</p>
<pre><code>➜  how-to-js-router git:(master) cat webpack/webpack<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span>
</code></pre>
<pre><code>module.exports = <span class="hljs-keyword">options</span> =&gt; {
  <span class="hljs-keyword">return</span> {
    entry: <span class="hljs-string">'./src/js/index.js'</span>,
    outpu<span class="hljs-variable">t:</span> {
      filename: <span class="hljs-string">'bundle.js'</span>,
    },
    devtoo<span class="hljs-variable">l:</span> <span class="hljs-string">'source-map'</span>,
    devServer: {
       por<span class="hljs-variable">t:</span> <span class="hljs-number">2013</span>,
       hos<span class="hljs-variable">t:</span> <span class="hljs-string">'0.0.0.0'</span>,
        historyApiFallback: {
          <span class="hljs-built_in">index</span>: <span class="hljs-string">'src/index.html'</span>,
      },
    },
  }
}
</code></pre>
<p>All we need to know for now for webpack, is the entrypoints for the index.html file and main js, src/js/index.js and src/index.html.</p>
<pre><code>➜  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) <span class="hljs-keyword">cat</span> src/js/<span class="hljs-built_in">index</span>.js
</code></pre>
<pre><code>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Index {

    <span class="hljs-keyword">constructor</span>(<span class="hljs-params"></span>){
      <span class="hljs-keyword">let</span> header = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'header'</span>)
      <span class="hljs-keyword">let</span> main = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'main'</span>)
      header.innerHTML = <span class="hljs-string">"header"</span>
    }


};
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">new</span> Index()
});
</code></pre>
<p>This is our view before we add the router, we should be outputting the word text to screen, and nothing more.</p>
<p><img src="https://s3.amazonaws.com/how-to-js-router/how-to-js-router-one.png" alt="view" title="view"></p>
<p>Repo at stage 1:  <a href="https://github.com/cerico/how-to-js-router/tree/0.1">https://github.com/cerico/how-to-js-router/tree/0.1</a></p>
<hr>
<h3>Stage Two - Attach Click</h3>
<pre><code>➜  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) ✗ <span class="hljs-keyword">cat</span> src/js/delph.js
</code></pre>
<pre><code><span class="hljs-builtin-name">export</span> class Delph {

    constructor(el){
        this.el = el
    }

    load(page){
        this.el.innerHTML =<span class="hljs-built_in"> page
</span>    }
}
</code></pre>
<p>Here is the beginning of our router. Its going to be initiated with an element, and have a load function that will attach some html to the element. And we will export it for use in our index file. Thats it for now!</p>
<pre><code>➜  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) ✗ <span class="hljs-keyword">cat</span> src/js/<span class="hljs-built_in">index</span>.js
</code></pre>
<pre><code><span class="hljs-keyword">import</span> { Delph } <span class="hljs-keyword">from</span> <span class="hljs-string">'./delph'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Index {

    <span class="hljs-keyword">constructor</span>(<span class="hljs-params"></span>){
      
      <span class="hljs-keyword">let</span> main = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'main'</span>)
      <span class="hljs-keyword">this</span>.delph = <span class="hljs-keyword">new</span> Delph(main)
      
      <span class="hljs-keyword">let</span> header = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'header'</span>)
      header.innerHTML = <span class="hljs-string">"header"</span>
      header.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span class="hljs-keyword">this</span>.load(<span class="hljs-string">'glossop'</span>)})
    }

    load(link){
      <span class="hljs-keyword">this</span>.delph.load(link)
    }

};
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">new</span> Index()
});
</code></pre>
<p>Returning to the index file, we import our new ‘Delph’ router. We then initiated an instance of the router for us to use., and we pass it the ‘main’ element. We also attach a click event to the header, which will run the load function and pass it some text, ‘glossop’. The load function passes this text to our nascent router’s load function, which will attach it to the ‘main’ element we passed it earlier.</p>
<p><img src="https://dl.dropboxusercontent.com/s/jw1jrxphzhmksnt/25FEE563-0988-4789-BEC7-A142DA34BFE6-517-00006B2B1B98B4F1.gif?dl=0" alt="view" title="click"></p>
<p>Repo at stage 2:  <a href="https://github.com/cerico/how-to-js-router/tree/0.2">https://github.com/cerico/how-to-js-router/tree/0.2</a></p>
<hr>
<h3>Stage Three - Routes</h3>
<p>So now we have a placeholder, where our router is going to live, but now we need to pass it some routes so we can display something other ‘glossop’. Lets make a routes object.</p>
<pre><code>➜  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) ✗ <span class="hljs-keyword">cat</span> src/js/routes.js
</code></pre>
<pre><code><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> routes = {
    glossop: <span class="hljs-string">'derbyshire'</span>,
    kendal:  <span class="hljs-string">'cumbria'</span>,
    hereford:  <span class="hljs-string">'herefordshire'</span>,
    malton:  <span class="hljs-string">'north yorkshire'</span>
}
</code></pre>
<p>Four named routes, each will return the county they are in when accessed. Now lets import this into our index.js file, and pass it to our Delph router.</p>
<pre><code>➜  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) ✗ <span class="hljs-keyword">cat</span> src/js/<span class="hljs-built_in">index</span>.js
</code></pre>
<pre><code><span class="hljs-keyword">import</span> { Delph } <span class="hljs-keyword">from</span> <span class="hljs-string">'./delph'</span>
<span class="hljs-keyword">import</span> { routes } <span class="hljs-keyword">from</span> <span class="hljs-string">'./routes'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Index {
    <span class="hljs-keyword">constructor</span>(<span class="hljs-params"></span>){      
      <span class="hljs-keyword">var</span> header = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'header'</span>)
      <span class="hljs-keyword">var</span> main = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'main'</span>)
      header.innerHTML = <span class="hljs-string">"click"</span>
      header.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span class="hljs-keyword">this</span>.load(<span class="hljs-string">'glossop'</span>)})
      <span class="hljs-keyword">this</span>.delph = <span class="hljs-keyword">new</span> Delph(routes,main)
    }
    load(link){
      <span class="hljs-keyword">this</span>.delph.load(link)
    }
};
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">new</span> Index()
});
</code></pre>
<pre><code>➜  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) ✗ <span class="hljs-keyword">cat</span> src/js/delph.js
</code></pre>
<pre><code><span class="hljs-builtin-name">export</span> class Delph {

    constructor(routes,el){
        this.routes = routes
        this.el = el
    }

    load(page){
        this.el.innerHTML =<span class="hljs-built_in"> page
</span>    }
}
</code></pre>
<p>Great, so now we’ve passed it the routes, but the click event is still just passing it ‘glossop’. And, with ‘header’ we still only have one link to click on!</p>
<p>Repo at stage 3:  <a href="https://github.com/cerico/how-to-js-router/tree/0.3">https://github.com/cerico/how-to-js-router/tree/0.3</a></p>
<hr>
<h3>Stage Four - Create Links and display route content</h3>
<p>Lets populate the header with a link for each route. We could make an array with each of the named routes, and iterate over them, attaching a click handler. But we already have a routes object, so lets iterate over that instead.</p>
<pre><code>➜  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) ✗ <span class="hljs-keyword">cat</span> src/js/<span class="hljs-built_in">index</span>.js
</code></pre>
<pre><code><span class="hljs-keyword">import</span> { Delph } <span class="hljs-keyword">from</span> <span class="hljs-string">'./delph'</span>
<span class="hljs-keyword">import</span> { routes } <span class="hljs-keyword">from</span> <span class="hljs-string">'./routes'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Index {

    <span class="hljs-keyword">constructor</span>(<span class="hljs-params"></span>){
      <span class="hljs-keyword">var</span> main = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'main'</span>)
      <span class="hljs-keyword">this</span>.delph = <span class="hljs-keyword">new</span> Delph(routes,main)
      <span class="hljs-keyword">this</span>.makeHeader(routes)
    }

    makeHeader(routes){
      <span class="hljs-keyword">let</span> el = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'header'</span>)
      <span class="hljs-built_in">Object</span>.keys(routes).map(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
        <span class="hljs-keyword">var</span> e = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"li"</span>);
        e.innerHTML = route
        e.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<span class="hljs-keyword">this</span>.load(route)})
        el.appendChild(e);
      })
    }

    load(link){
      <span class="hljs-keyword">this</span>.delph.load(link)
    }

};
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">new</span> Index()
});
</code></pre>
<p>Here, we pass our routes object to a makeHeader function, which iterates over each, and creates a click handler for each link, passing its route to the load function. But we don’t want to display the key, or route name - we want to display the data assocated with it. So we can modify the router to do this, by finding the data associated with the route we have been passed.</p>
<pre><code>➜  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) <span class="hljs-keyword">cat</span> src/js/delph.js
</code></pre>
<pre><code>export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Delph</span> </span>{

    <span class="hljs-keyword">constructor</span>(routes,el){
        <span class="hljs-keyword">this</span>.routes = routes
        <span class="hljs-keyword">this</span>.el = el
    }

    load(page){
        const <span class="hljs-keyword">data</span> = <span class="hljs-keyword">this</span>.routes[page]
        <span class="hljs-keyword">this</span>.el.innerHTML = <span class="hljs-keyword">data</span>
    }
}
</code></pre>
<p><img src="https://dl.dropboxusercontent.com/s/c4e4g0euoh0lhy6/C25955EF-BBED-406A-8B05-2408D80FEDB0-517-00006BF7DFD0291D.gif?dl=0" alt="view" title="links"></p>
<p>Repo at stage 4:  <a href="https://github.com/cerico/how-to-js-router/tree/0.4">https://github.com/cerico/how-to-js-router/tree/0.4</a></p>
<hr>
<h3>Stage Five - Fetch</h3>
<p>Great, we now have a working router. Which works just fine…but we’re fairly limited and have to add all our page data inside the routes object, which is going to get pretty unwieldly. A better approach is to put our html into template files, and use fetch to retrieve them.</p>
<pre><code>➜  how-to-js-router git:(dev) ✗ tree src/views
src/views
├── glossop<span class="hljs-selector-class">.html</span>
├── hereford<span class="hljs-selector-class">.html</span>
├── kendal<span class="hljs-selector-class">.html</span>
└── malton<span class="hljs-selector-class">.html</span>

<span class="hljs-number">0</span> directories, <span class="hljs-number">4</span> files
</code></pre>
<pre><code>➜  how-to-js-router git:(dev) ✗ cat src/views/glossop.html
<span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background: cornflowerblue;display:block"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>glossop<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>hadfield<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<p>Now we can have an easily readable html file and use fetch to insert it into the page. We’ll need to create a Page component, to handle this.</p>
<pre><code>➜  how-to-js-router git:(dev) ✗ cat src/js/page.js
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Page</span> </span>{
  <span class="hljs-keyword">constructor</span>(url) {
    <span class="hljs-keyword">this</span>.url = <span class="hljs-string">`src/views/<span class="hljs-subst">${url}</span>.html`</span>;
  }

  load() {
    <span class="hljs-keyword">return</span> fetch(<span class="hljs-keyword">this</span>.url).then(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.text())
    .then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-keyword">this</span>.html = data)
    .catch(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Booo"</span>))
  }

  show(el) {
    el.innerHTML = <span class="hljs-keyword">this</span>.html;
  }
}
</code></pre>
<p>So whats happening here? We have three main parts to go through</p>
<ul>
<li>constructor - when a new instance of the page is initiated, it will be passed a url, e.g ‘hereford’, we’ll turn this into a useable path - ‘views/hereford.html’.</li>
<li>load - the url that the html lives at. Once this is retrieved we’ll attach store the returned html in ‘this.html’.</li>
<li>show - This attaches the html to whatever element it is passed.</li>
</ul>
<p>Now lets update the routes file to use the Page component.</p>
<pre><code>➜  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) ✗ <span class="hljs-keyword">cat</span> src/js/routes.js
</code></pre>
<pre><code><span class="hljs-keyword">import</span> { Page } <span class="hljs-keyword">from</span> <span class="hljs-string">'./page'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> routes = {
    <span class="hljs-attr">glossop</span>: <span class="hljs-keyword">new</span> Page(<span class="hljs-string">'glossop'</span>),
    <span class="hljs-attr">kendal</span>:  <span class="hljs-keyword">new</span> Page(<span class="hljs-string">'kendal'</span>),
    <span class="hljs-attr">hereford</span>: <span class="hljs-keyword">new</span> Page(<span class="hljs-string">'hereford'</span>),
    <span class="hljs-attr">malton</span>:  <span class="hljs-keyword">new</span> Page(<span class="hljs-string">'malton'</span>)
}
</code></pre>
<p>So, now each of our routes creates an instance of the Page component, which will handle retrieving the appropriate html via fetch.</p>
<p>And if we update the Delph router</p>
<pre><code>➜  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) ✗ <span class="hljs-keyword">cat</span> src/js/delph.js
</code></pre>
<pre><code><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Delph</span> </span>{

    <span class="hljs-keyword">constructor</span>(routes,el){
        <span class="hljs-keyword">this</span>.routes = routes
        <span class="hljs-keyword">this</span>.el = el
    }

    load(page){
        <span class="hljs-keyword">let</span> route =  <span class="hljs-keyword">this</span>.routes[page]
        route.load().then(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(r))
    }
}
</code></pre>
<p>Instead of attaching text directly, we have access to each route’s Page object, and load function, which will return us the html. From there its a short step to sending that back to the Page object’s show function, along with the element we’d like it attached to.</p>
<pre><code>➜  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) ✗ <span class="hljs-keyword">cat</span> src/js/delph.js
</code></pre>
<pre><code><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Delph</span> </span>{

    <span class="hljs-keyword">constructor</span>(routes,el){
        <span class="hljs-keyword">this</span>.routes = routes
        <span class="hljs-keyword">this</span>.el = el
    }

    load(page){
        <span class="hljs-keyword">let</span> route =  <span class="hljs-keyword">this</span>.routes[page]
        route.load().then(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> route.show(<span class="hljs-keyword">this</span>.el))
    }
}
</code></pre>
<p><img src="https://dl.dropboxusercontent.com/s/1eezazgojfxtbgm/3245843A-4405-4732-B6FA-8DBEDC2BF784-517-00006CA2AEB59D6C.gif?dl=0" alt="view"></p>
<p>Repo at stage 5:  <a href="https://github.com/cerico/how-to-js-router/tree/0.5">https://github.com/cerico/how-to-js-router/tree/0.5</a></p>
<hr>
<h3>Next</h3>
<p>In part two we’ll look at updating the url, and handling refreshing and permanent links.</p>
<p><a href="../2017-09-02---js-router-part-two-refresh/">Part Two</a></p>
</div><div data-reactid="63"><span style="display:inline;" data-reactid="64"><span style="margin-right:8px;line-height:1.2;display:inline-block;" data-reactid="65"><a style="color:#7e9aa3;display:inline-block;font-size:1rem;" href="/tags/#javascript" data-reactid="66">Javascript</a><span data-reactid="67">,</span></span><span style="margin-right:8px;line-height:1.2;display:inline-block;" data-reactid="68"><a style="color:#7e9aa3;display:inline-block;font-size:1rem;" href="/tags/#es6" data-reactid="69">ES6</a><span data-reactid="70"></span></span></span><hr style="margin-top:1.07rem;" data-reactid="71"/><p style="margin-bottom:0.33rem;" data-reactid="72"><a style="display:inline-block;" href="/about/" data-reactid="73"><img src="https://s3.eu-west-2.amazonaws.com/io1937/ghpages/linkedin.jpg" style="float:left;margin-top:0;margin-bottom:0;margin-right:0.4125rem;width:6.6rem;height:6.6rem;border-radius:50%;border:1px gray solid;" data-reactid="74"/></a><div style="display:inline-block;" data-reactid="75"><span class="authorbio" data-reactid="76">garethrobertlee</span><a href="/about/" data-reactid="77"></a></div></p><div class="linx" data-reactid="78"><div class="linx" data-reactid="79"><span data-reactid="80"><a style="color:#7e9aa3;" href="/" data-reactid="81"><!-- react-text: 82 -->Posts  <!-- /react-text --><br data-reactid="83"/></a><a style="color:#7e9aa3;" href="/about/" data-reactid="84"><!-- react-text: 85 -->About  <!-- /react-text --><br data-reactid="86"/></a></span><a style="color:#7e9aa3;" href="mailto:garethrobertlee@gmail.com?Subject=Hello" target="blank_" data-reactid="87">Contact</a></div></div></div></div></section></div></section></div></div><script src="/bundle.js?t=1507315521676"></script></body></html>