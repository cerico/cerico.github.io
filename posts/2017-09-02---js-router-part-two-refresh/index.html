<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title data-react-helmet="true">cerico | JS Router Part Two - Refresh</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font-size:112.5%;line-height:1.65em;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:normal;word-wrap:break-word;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:2.25rem;line-height:2.475rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.62671rem;line-height:2.475rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.38316rem;line-height:1.65rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.65rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.85028rem;line-height:1.65rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;color:hsla(0,0%,0%,0.8);font-family:Roboto,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.78405rem;line-height:1.65rem;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}ul{margin-left:1.65rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.65rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;font-size:0.85rem;line-height:1.42;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;padding:1.65rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;font-size:1rem;line-height:1.65rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}blockquote{margin-left:1.65rem;margin-right:1.65rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.65rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.65rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.65rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.65rem;margin-bottom:calc(1.65rem / 2);margin-top:calc(1.65rem / 2);}li > ul{margin-left:1.65rem;margin-bottom:calc(1.65rem / 2);margin-top:calc(1.65rem / 2);}code{font-size:0.85rem;line-height:1.65rem;}kbd{font-size:0.85rem;line-height:1.65rem;}samp{font-size:0.85rem;line-height:1.65rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:tnum;padding-left:1.1rem;padding-right:1.1rem;padding-top:0.825rem;padding-bottom:calc(0.825rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:Consolas,"Roboto Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;}pre code{background:none;line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:"Â ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}</style><link href="//fonts.googleapis.com/css?family=Roboto:400,400i,700" rel="stylesheet" type="text/css"/><style>@import url(https://fonts.googleapis.com/css?family=Raleway);@import url(https://fonts.googleapis.com/css?family=Work+Sans);body{background-color:#fff!important}@media (min-width:768px){.mini{display:none}}@media screen and (orientation:portrait){.site-main .content-right{max-width:95%!important}}@media screen and (max-width:768px),screen and (orientation:portrait){.leftside{display:none}.intro .text-col{width:90%!important;max-width:none!important}.intro .text-col,.mini{margin-left:5%!important}.mini{width:90%;display:inline-block!important;margin-bottom:-54px;z-index:900}.mini a{padding-bottom:1.25rem;color:"#1e1e1e";display:inline-block}.mini p{float:left}.mini .linx{display:inline-block!important;margin-top:20px}.content-left{display:none}}*{border:0;box-sizing:border-box;-webkit-font-smoothing:antialiased;font-weight:400;margin:0;outline:0;padding:0;text-decoration:none;text-rendering:optimizeLegibility}body{display:block}.h3,.h4,h3,h4{line-height:24px;line-height:1.5rem}.h3,h3{font-size:21.328px;font-size:1.333rem;font-family:Antonio,Open Sans,Helvetica Neue,Helvetica,Arial,"sans-serif";font-weight:700;text-transform:uppercase;margin-bottom:8px;margin-bottom:.5rem}.hero h1{margin:0}.h1,.h2,h1,h2{font-weight:300;text-transform:uppercase;margin-bottom:16px;margin-bottom:1rem}.h1,h1{font-size:37.89749px;font-size:37.897px;font-size:2.36859rem;line-height:48px;line-height:3rem}.hero__div{position:absolute;bottom:0;left:0;width:100%;height:auto;margin-bottom:-1px}html{color:#000;line-height:1.5;font-family:Open Sans,Helvetica Neue,Helvetica,Arial,"sans-serif";font-size:16px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-size:18px}body{background-color:#1e1e1e;font-family:Work Sans,sans-serif;line-height:1.45;font-size:20px;font-size:1.25rem;text-rendering:optimizeLegibility;-webkit-font-variant-ligatures:common-ligatures;font-variant-ligatures:common-ligatures;-webkit-font-feature-settings:"kern","liga";font-feature-settings:"kern","liga","liga","clig","kern";-webkit-font-kerning:normal;font-kerning:normal}body a{-webkit-text-decoration-skip:ink;text-decoration-skip:ink}@media only screen and (max-width:600px){body{font-size:1.05rem}}@media only screen and (max-width:400px){body{font-size:1rem}}.font-smoothing{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.marvin .wrapper{width:90%;max-width:1248px;max-width:78rem;margin:auto}.marvin .intro{padding-top:32px;padding-top:2rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:-.01em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.marvin .intro .text-col{max-width:832px;max-width:52rem;width:80%;margin-right:18%}.marvin .intro .leftside{max-width:160px;max-width:10rem;width:5%}.marvin .intro .text-col p{padding-bottom:20px;padding-bottom:1.25rem;color:"#1e1e1e"}.hero{background:#b1d8e4;background:#d2f0dc;padding:32px 64px 48px;padding:2rem 4rem 3rem;position:relative}body{margin-top:-47px;background:#fcf8ed!important}.hero__div{bottom:0}.hero__div,.hero__divu{position:absolute;left:0;width:100%;height:auto;margin-bottom:-1px}.hero__divu{top:0}.hero h1,h2,h3,h4,h5,h6{line-height:1.2;font-family:-apple-system,\.SFNSText-Regular,San Francisco,Roboto,Segoe UI,Helvetica Neue,Lucida Grande,Arial,sans-serif;font-weight:700;color:#494e52;color:#254157;color:#fff}@media (min-width:660px){.schedule #schedule-times .schedule-item{max-width:680px;margin:0 auto;min-height:200px;padding-left:180px;position:relative;padding-top:0;border:0;text-align:left;border-top:3px solid #fff2de;padding-top:20px}.schedule-item{max-width:680px;margin:0 auto;position:relative;padding-top:0;border:0;text-align:left;border-bottom:2px dotted #1e1e1e;padding-bottom:20px}.skew{font-size:1.6rem}schedule-item h2{font-size:1.8em;margin-bottom:.25em;font-family:Work Sans;font-weight:400}.timeskew{position:absolute;top:0;left:0;font-size:1.8em;margin:0;width:150px;text-align:center;font-size:1rem;color:gray;margin-bottom:.165rem;margin-left:0;padding-top:20px;text-align:left}}.site-main{width:100%;margin-bottom:36px}.site-grid{width:100%;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}@media screen and (min-width:768px){.main-column-left{float:left;width:16.6666666667%}}.main-column-left{position:relative}@media screen and (min-width:768px){.site-main .main-column-right{margin-top:0}}.active-person-container .person-data,.grid{display:block}@media screen and (min-width:768px){.active-person-container .person-data,.grid{display:-webkit-box;display:-ms-flexbox;display:flex}}@media screen and (min-width:768px){.main-column-right{float:left;width:83.3333333333%}}.main-column-right{max-width:1400px;position:relative}@media screen and (min-width:768px){.site-main .content-left{max-width:55%;-ms-flex-preferred-size:10%;flex-basis:10%;padding-right:60px}}@media screen and (min-width:768px){.site-main .content-left h2,.site-main .content-left h3{color:#4cba7a}}.content{padding:0;width:100%;position:relative;background:#96d4e2;background:#9fcae3;margin:0!important;max-width:none!important}@media screen and (min-width:768px){.content-left h2,.content-left h3{color:#4cba7a!important}}.content h2{margin:0 0 30px;padding-bottom:30px;border-color:inherit;border-bottom:2px solid}.active-person-container .person-title h3,.stat h3,h1,h2{font-weight:400;letter-spacing:.12em;font-family:HalisR-SBold,sans-serif;text-transform:lowercase}@media screen and (min-width:768px){.site-main .content-right{max-width:72%;-ms-flex-preferred-size:88%;flex-basis:88%;padding-left:60px;padding-right:30px}}@media screen and (min-width:768px){.site-main .content-left,.site-main .content-right{padding:60px 0;padding:30px}}@media screen and (min-width:768px){.events-list{background:#4cba7a}}@media screen and (min-width:768px){.one-half{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}}@media screen and (min-width:768px){.flex-item{-ms-flex-preferred-size:auto;flex-basis:auto}}.site-header{background:#d3f0dc;display:-webkit-box;display:-ms-flexbox;display:flex;color:#4cba7a;min-height:160px;background-size:cover;background-position:50%}@media screen and (min-width:1092px){.site-header{position:relative}}.site-hdeader:before{top:0;left:0;right:0;z-index:0;content:"";opacity:.75;height:160px;position:absolute;background-image:linear-gradient(#1e1e1e,transparent)}.site-header .site-grid{z-index:1;padding:30px;position:relative}@media screen and (min-width:600px){.site-header .site-grid{position:static}}@media screen and (min-width:768px){.site-header .site-grid{padding:0}}.site-header .main-column-left{position:absolute}.site-header .main-column-right{position:static}@media screen and (min-width:1092px){.site-header .main-column-right{overflow:hidden;padding-right:30px}}@media screen and (max-width:768px){.site-header.nav-open .site-title .icon{fill:#4cba7a}}.site-header .site-title{margin:0;z-index:2;position:relative}.site-header .site-title a{height:0;width:117px;display:block;position:relative;padding-top:35.831469244%;transition:all .2s ease-out}.site-header .site-title a:focus .icon,.site-header .site-title a:hover .icon{fill:#ffc732}.site-header .site-title .icon{top:0;left:0;width:100%;height:100%;fill:#fff;position:absolute;transition:fill .2s ease-out}@media screen and (min-width:768px){.site-header .site-title a{width:0;padding:0;margin:0 auto;-webkit-transform-origin:bottom;transform-origin:bottom;-webkit-transform:rotate(90deg) translateX(0) translateY(-35px);transform:rotate(90deg) translateX(0) translateY(-35px)}.site-header .site-title .icon{width:195px;height:70px}}.site-header .header-text{margin-top:100px}.site-header .header-text h2{font-size:30px;line-height:1.2em;font-family:HalisR-Black,sans-serif;text-transform:uppercase}@media screen and (min-width:768px){.site-header .header-text{left:0;width:100%;bottom:6px;max-width:700px;position:absolute;padding-right:30px}.site-header .header-text h2{font-size:48px;line-height:1.25em}}@media screen and (min-width:768px){.site-header .main-column-left,.site-header .main-column-right{position:relative}}.site-nav{top:0;right:0;bottom:0;z-index:1;width:100%;position:fixed;background:#1e1e1e;padding:100px 30px 60px;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);transition:-webkit-transform .5s cubic-bezier(1,0,.5,1);transition:transform .5s cubic-bezier(1,0,.5,1);transition:transform .5s cubic-bezier(1,0,.5,1),-webkit-transform .5s cubic-bezier(1,0,.5,1)}.site-nav.-active{-webkit-transform:translateZ(0);transform:translateZ(0)}.site-nav .nav{margin:0;padding:0;position:relative}.site-nav .nav:after,.site-nav .nav:before{content:" ";display:block;height:0;overflow:hidden}.site-nav .nav:after{clear:both}.site-nav .nav li{list-style:none}.site-nav .nav li.current-menu-item a:after,.site-nav .nav li.current_page_parent a:after{opacity:1}.site-nav .nav a{padding:8px 0;font-size:18px;position:relative;display:inline-block;text-decoration:none;transition:color .1s ease-out}.site-nav .nav a:after{left:0;right:0;bottom:0;opacity:0;content:"";height:2px;position:absolute;background:#fff;transition:opacity .1s ease-out,background .1s ease-out}.site-nav .header-pattern{left:0;bottom:0;z-index:0;width:100%;height:36px;position:absolute}@media screen and (min-width:600px){.site-nav{top:-36px;width:45%;bottom:-36px;position:absolute;padding:120px 30px 30px}.site-nav .nav a{padding:8px 0}}@media screen and (min-width:1092px){.site-nav{top:auto;width:auto;bottom:auto;padding:18px 0;background:0 0;position:relative;-webkit-transform:translateZ(0);transform:translateZ(0)}.site-nav .nav{margin:0 -12px}.site-nav .nav li{float:left}.site-nav .nav li a{padding:12px;font-size:16px}.site-nav .nav li a:after{left:12px;right:12px}.site-nav .nav li a:focus,.site-nav .nav li a:hover{color:#ffc732}.site-nav .nav li a:focus:after,.site-nav .nav li a:hover:after{opacity:1;background:#ffc732}.site-nav .header-pattern{display:none}}.nav-toggle{top:20px;z-index:1;right:30px;width:60px;height:60px;border:none;background:0 0;position:absolute;-webkit-appearence:none}@media screen and (min-width:768px){.nav-toggle{top:0}}@media screen and (min-width:1092px){.nav-toggle{display:none}}.nav-toggle:active,.nav-toggle:focus{outline:0}.nav-toggle .nav-label{opacity:1;float:left;display:none;font-size:14px;text-transform:uppercase}.nav-toggle.nav-open .nav-svg .dots{left:24px;opacity:0;background:hsla(0,0%,100%,0);-webkit-animation:showDots .2s .2s forwards;animation:showDots .2s .2s forwards}.nav-toggle.nav-open .nav-svg .dots:before{-webkit-animation:toCloseDotsTop .6s .2s forwards;animation:toCloseDotsTop .6s .2s forwards}.nav-toggle.nav-open .nav-svg .dots:after{-webkit-animation:toCloseDotsBottom .6s .2s forwards;animation:toCloseDotsBottom .6s .2s forwards}.nav-toggle.nav-open .nav-svg path.x{transition:.2s ease-in-out .2s;-webkit-transform:rotate(45deg) translate(-24%,80px) scaleX(.7);transform:rotate(45deg) translate(-24%,80px) scaleX(.7)}.nav-toggle.nav-open .nav-svg path.x:first-of-type{-webkit-transform:rotate(-45deg) translate(-24%,-80px) scaleX(.7);transform:rotate(-45deg) translate(-24%,-80px) scaleX(.7)}.nav-toggle.nav-open .nav-svg path.yy{stroke-dashoffset:-1200;transition:.25s ease-in-out 0s}.nav-toggle .nav-svg{display:inline-block;-webkit-transform:translate(-1px,2px);transform:translate(-1px,2px)}.nav-toggle .nav-svg .dots{top:24px;left:10px;width:2px;height:2px;border-radius:1px;background:#fff;position:absolute;transition:background .25s ease-out,left .25s ease-out}.nav-toggle .nav-svg .dots:after,.nav-toggle .nav-svg .dots:before{left:0;opacity:1;width:2px;content:"";height:2px;border-radius:1px;background:#fff;position:absolute}.nav-toggle .nav-svg .dots:before{top:-7px}.nav-toggle .nav-svg .dots:after{top:7px;transition-delay:.1s}.nav-toggle .nav-svg path{stroke:#fff;stroke-width:70}.nav-toggle .nav-svg path.x{transition:.25s ease-in-out 0s;-webkit-transform-origin:right center;transform-origin:right center;-webkit-transform:rotate(0) translateX(0);transform:rotate(0) translateX(0)}.nav-toggle .nav-svg path.yy{stroke-dashoffset:1700;stroke-dasharray:2520 3000;transition:.2s ease-in-out .2s}@-webkit-keyframes showDots{0%{opacity:0}to{opacity:1}}@keyframes showDots{0%{opacity:0}to{opacity:1}}@-webkit-keyframes toCloseDotsBottom{0%,40%,75%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:translateZ(0);transform:translateZ(0)}40%{-webkit-transform:translate3d(0,5px,0);transform:translate3d(0,5px,0)}75%{-webkit-transform:translate3d(0,-3px,0);transform:translate3d(0,-3px,0)}to{-webkit-transform:none;transform:none}}@keyframes toCloseDotsBottom{0%,40%,75%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:translateZ(0);transform:translateZ(0)}40%{-webkit-transform:translate3d(0,5px,0);transform:translate3d(0,5px,0)}75%{-webkit-transform:translate3d(0,-3px,0);transform:translate3d(0,-3px,0)}to{-webkit-transform:none;transform:none}}@-webkit-keyframes toCloseDotsTop{0%,40%,75%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:translateZ(0);transform:translateZ(0)}40%{-webkit-transform:translate3d(0,-5px,0);transform:translate3d(0,-5px,0)}75%{-webkit-transform:translate3d(0,3px,0);transform:translate3d(0,3px,0)}to{-webkit-transform:none;transform:none}}@keyframes toCloseDotsTop{0%,40%,75%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:translateZ(0);transform:translateZ(0)}40%{-webkit-transform:translate3d(0,-5px,0);transform:translate3d(0,-5px,0)}75%{-webkit-transform:translate3d(0,3px,0);transform:translate3d(0,3px,0)}to{-webkit-transform:none;transform:none}}.search-toggle{right:0;top:28px;border:none;display:none;background:0 0;position:absolute}.search-toggle:focus,.search-toggle:hover{outline:0}.search-toggle:focus .icon,.search-toggle:hover .icon{fill:#ffc732}@media screen and (min-width:1092px){.search-toggle{display:block}}.search-toggle .icon{width:21px;height:20px;fill:#fff;transition:fill .1s ease-out}.search-form{width:100%;margin-top:24px;position:relative}.search-form input{outline-offset:0;width:100%;border:none;height:36px;padding:0 18px;font-size:16px;background:#fff}.search-form input:focus{outline:1px solid #ffc732}.search-form .search-submit{top:0;right:0;bottom:0;width:36px;border:none;padding:4px 0 0;position:absolute;background:0 0}.search-form .search-submit:focus{outline:0}.search-form .search-submit .icon{width:21px;height:20px;fill:#4cba7a}.search-form .close-button{display:none}@media screen and (min-width:1092px){.search-form input{height:72px;padding-right:70px}}.site-header .search-form{z-index:1}@media screen and (min-width:1092px){.site-header .search-form{top:0;right:0;margin-top:0;width:33.3333333333%;position:absolute;margin-right:-31px;pointer-events:none;-webkit-transform:translateX(100%);transform:translateX(100%);transition:-webkit-transform .35s ease-out;transition:transform .35s ease-out;transition:transform .35s ease-out,-webkit-transform .35s ease-out}.site-header .search-form.-active{margin-right:0;pointer-events:auto;-webkit-transform:translateX(0);transform:translateX(0)}.site-header .search-form .search-submit{display:none}.site-header .search-form .close-button{top:18px;right:17px;display:block;cursor:pointer;position:absolute}}.content .search-form{margin-bottom:30px}.content .search-form input{outline:1px solid #ffc732}input{border-radius:0;-webkit-appearance:none}input[type=search]{box-sizing:border-box;-webkit-appearance:none}.select-wrapper{margin:0;padding:0;position:relative}.select-wrapper:after{right:10px;height:8px;width:13px;content:"";bottom:14px;position:absolute;pointer-events:none;background-size:13px 8px}.select-wrapper select{border:none;box-shadow:none;border-radius:0;padding-right:18px;background-color:transparent;background-image:none;-webkit-appearance:none}.select-wrapper select:focus{outline:0}.newsletter-form:after,.newsletter-form:before{content:" ";display:block;height:0;overflow:hidden}.newsletter-form:after{clear:both}.newsletter-form button:focus,.newsletter-form input:focus{outline:0}.newsletter-form input[type=email]{float:left;height:36px;border:none;color:#1e1e1e;padding:10px;font-size:11px;font-weight:700;line-height:36px;background:#fff}.newsletter-form button[type=submit]{float:left;height:36px;color:#fff;padding:0 20px;background:#1e1e1e;border:2px solid #fff;transition:background .2s ease-out,color .2s ease-out,padding .2s ease-out}.newsletter-form button[type=submit] .arrow{width:12px;height:12px;border:none;background:0 0;position:relative;display:inline-block}.newsletter-form button[type=submit] .arrow:before{top:2px;right:6px;width:8px;height:8px;content:"";position:absolute;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);transition:box-shadow .2s ease-out;box-shadow:2px 2px 0 #fff,3px 2px 0 #fff,2px 3px 0 #fff,3px 3px 0 #fff}.newsletter-form button[type=submit] .arrow:after{width:0;height:0;left:-1px;bottom:5px;content:"\2022";color:#fff;line-height:0;font-size:14px;position:absolute;transition:left .1s ease-out,bottom .1s ease-out,letter-spacing .1s ease-out,color .2s ease-out}.newsletter-form button[type=submit] .arrow.-long{width:22px}.newsletter-form button[type=submit] .arrow.-long:after{left:0;content:"\2022\2022\2022";text-align:right}.newsletter-form button[type=submit] .arrow.-left{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.newsletter-form button[type=submit] .arrow:focus,.newsletter-form button[type=submit] .arrow:hover{outline:0}.newsletter-form button[type=submit] .arrow:focus:after,.newsletter-form button[type=submit] .arrow:hover:after{left:1px}.newsletter-form button[type=submit] .arrow:focus.-long:after,.newsletter-form button[type=submit] .arrow:hover.-long:after{left:-.19em;letter-spacing:.1em}.newsletter-form button[type=submit]:focus,.newsletter-form button[type=submit]:hover{color:#1e1e1e;background:#ffc732;border-color:#ffc732}.newsletter-form button[type=submit]:focus .arrow,.newsletter-form button[type=submit]:hover .arrow{width:12px;height:12px;border:none;background:0 0;position:relative;display:inline-block}.newsletter-form button[type=submit]:focus .arrow:before,.newsletter-form button[type=submit]:hover .arrow:before{top:2px;right:6px;width:8px;height:8px;content:"";position:absolute;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);transition:box-shadow .2s ease-out;box-shadow:2px 2px 0 #1e1e1e,3px 2px 0 #1e1e1e,2px 3px 0 #1e1e1e,3px 3px 0 #1e1e1e}.newsletter-form button[type=submit]:focus .arrow:after,.newsletter-form button[type=submit]:hover .arrow:after{width:0;height:0;left:-1px;bottom:5px;content:"\2022";color:#1e1e1e;line-height:0;font-size:14px;position:absolute;transition:left .1s ease-out,bottom .1s ease-out,letter-spacing .1s ease-out,color .2s ease-out}.newsletter-form button[type=submit]:focus .arrow.-long,.newsletter-form button[type=submit]:hover .arrow.-long{width:22px}.newsletter-form button[type=submit]:focus .arrow.-long:after,.newsletter-form button[type=submit]:hover .arrow.-long:after{left:0;content:"\2022\2022\2022";text-align:right}.newsletter-form button[type=submit]:focus .arrow.-left,.newsletter-form button[type=submit]:hover .arrow.-left{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.newsletter-form button[type=submit]:focus .arrow:focus,.newsletter-form button[type=submit]:focus .arrow:hover,.newsletter-form button[type=submit]:hover .arrow:focus,.newsletter-form button[type=submit]:hover .arrow:hover{outline:0}.newsletter-form button[type=submit]:focus .arrow:focus:after,.newsletter-form button[type=submit]:focus .arrow:hover:after,.newsletter-form button[type=submit]:hover .arrow:focus:after,.newsletter-form button[type=submit]:hover .arrow:hover:after{left:1px}.newsletter-form button[type=submit]:focus .arrow:focus.-long:after,.newsletter-form button[type=submit]:focus .arrow:hover.-long:after,.newsletter-form button[type=submit]:hover .arrow:focus.-long:after,.newsletter-form button[type=submit]:hover .arrow:hover.-long:after{left:-.19em;letter-spacing:.1em}.stat{width:354px;height:354px;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;text-align:center;background-size:cover;background-position:0 0}.stat .stat-content{margin:auto;padding:30px 25% 0}.stat h3{margin:0;line-height:1em}.stat p{margin:0}.events-list .no-events .icon-set:after,.events-list .no-events .icon-set:before{content:" ";display:block;height:0;overflow:hidden}.events-list .no-events .icon-set:after{clear:both}.events-list .no-events .icon{float:left;width:72px;height:72px;fill:#1e1e1e}.events-list .no-events .pattern{width:100%}.events-list .event{cursor:pointer}.events-list .event:focus .article-title a,.events-list .event:hover .article-title a{color:#ffc732}.events-list .event+.event{margin-top:20px}.events-list .event .article-content,.events-list .event .article-date{display:-webkit-box;display:-ms-flexbox;display:flex}.events-list .event .article-date{width:74px;height:74px;color:#1e1e1e;min-width:74px;margin-right:15px;-ms-flex-preferred-size:content;flex-basis:content;margin-bottom:15px;border-radius:100%;border:2px dotted #1e1e1e}.events-list .event .article-date .-inner{margin:auto;display:block}.events-list .event .article-date .-inner span{display:block;font-size:11px;text-align:center;line-height:1.090909091em}.events-list .event .article-title{margin:0;font-size:16px;font-weight:700;letter-spacing:0;line-height:1.5em;font-family:Karla,Helvetica,sans-serif;text-transform:capitalize}.events-list .event .article-title a{color:#4cba7a;text-decoration:none;transition:color .2s ease-out}.events-list .event .event-summary{margin:0;color:#1e1e1e}.article-list .article .article-title{margin:0;font-size:16px;font-weight:700;font-family:Karla,Helvetica,sans-serif;line-height:1.5em;text-transform:capitalize}.article-list .article .article-title a{color:#4cba7a;text-decoration:none}.article-list .article .article-title a:focus,.article-list .article .article-title a:hover{color:#ffc732}.article-list .article .article-meta{font-size:11px;line-height:1.636363636em}.article-list .article .article-meta a{text-decoration:none}.article-list .article .article-meta a:focus,.article-list .article .article-meta a:hover{color:#ffc732}.article-list .article .article-excerpt p{margin-top:.5em}.people-grid{margin:0;padding:0}.people-grid:after,.people-grid:before{content:" ";display:block;height:0;overflow:hidden}.people-grid:after{clear:both}.people-grid .person{width:100%;list-style:none;position:relative}.people-grid .person+.person{margin-top:30px}@media screen and (min-width:768px){.people-grid .person+.person{margin-top:0}}.people-grid .person .person-activate.x-button{top:0;right:0}.people-grid .person .person-activate.x-button:focus+.person-data .thumb-wrap .thumb-hover,.people-grid .person .person-activate.x-button:hover+.person-data .thumb-wrap .thumb-hover{opacity:1}.people-grid .person .person-activate{cursor:pointer}.people-grid .person .person-activate:focus .thumb-wrap .thumb-hover,.people-grid .person .person-activate:hover .thumb-wrap .thumb-hover{opacity:1}.people-grid .person h3{font-size:16px;line-height:1em;letter-spacing:0;font-family:Karla,Helvetica,sans-serif;text-transform:capitalize}.people-grid .person h3 .sub-title{display:block;font-size:11px;font-weight:400;letter-spacing:0;line-height:1.636363636em}@media screen and (min-width:768px){.people-grid .person .thumb-wrap{margin:0;clip:auto;width:auto;height:auto;position:relative}}.people-grid .person .person-title{min-height:34px}.people-grid .thumb-wrap .thumb{overflow:hidden}.people-grid .bio,.people-grid .thumb-wrap .thumb img{display:none}@media screen and (min-width:768px){.people-grid{margin:0 -15px;width:calc(100% + 30px)}.people-grid .person{width:180px;vertical-align:top;margin:0 15px 30px;display:inline-block}}.x-button.person-toggle{z-index:1;position:absolute}.x-button.person-toggle:focus,.x-button.person-toggle:hover{background:#ffc732;border-color:#ffc732}.x-button.person-toggle:focus:after,.x-button.person-toggle:focus:before,.x-button.person-toggle:hover:after,.x-button.person-toggle:hover:before{color:#1e1e1e}.x-button.person-toggle:focus .x:after,.x-button.person-toggle:focus .x:before,.x-button.person-toggle:hover .x:after,.x-button.person-toggle:hover .x:before{background:#1e1e1e}.thumb-wrap{position:relative}.thumb-wrap:before{top:0;left:0;right:0;bottom:0;opacity:0;content:"";border-radius:50%;position:absolute;transition:opacity .2s ease-out;background:rgba(255,199,50,.5)}.thumb-wrap .thumb,.thumb-wrap .thumb-hover{height:0;width:100%;overflow:hidden;border-radius:50%;padding-bottom:100%;background-size:cover}.thumb-wrap .thumb-hover{top:0;left:0;right:0;bottom:0;opacity:0;position:absolute;transition:opacity .2s ease-out}.active-person-container{top:0;left:0;right:0;z-index:3;display:none;margin-top:-32px;position:absolute;background:#1e1e1e}.active-person-container:after,.active-person-container:before{content:" ";display:block;height:0;overflow:hidden}.active-person-container:after{clear:both}.active-person-container.-active{display:-webkit-box;display:-ms-flexbox;display:flex}.active-person-container .x-button.person-toggle{top:42px;right:8.3333333333%;-webkit-transform:rotate(0) translateX(50%);transform:rotate(0) translateX(50%)}.active-person-container .-column-right{padding:30px;position:relative}.active-person-container .person-data.exitRight{-webkit-animation:exitRight .2s forwards;animation:exitRight .2s forwards}.active-person-container .person-data.exitLeft{-webkit-animation:exitLeft .2s forwards;animation:exitLeft .2s forwards}.active-person-container .person-data.enterRight{-webkit-animation:enterRight .2s forwards;animation:enterRight .2s forwards}.active-person-container .person-data.enterLeft{-webkit-animation:enterLeft .2s forwards;animation:enterLeft .2s forwards}.active-person-container .active-person-header{color:#4cba7a}.active-person-container .person-title h3{font-size:18px;margin-bottom:30px;color:#4cba7a}.active-person-container .person-title h3 .sub-title{display:block;font-size:12px;margin-top:30px;letter-spacing:0;font-family:Karla,Helvetica,sans-serif;text-transform:capitalize}.active-person-container .bio{color:#fff}.active-person-container .bio p{margin-top:0}.active-person-container .post-nav{left:0;right:0;top:130px;display:none;position:absolute}@media screen and (min-width:768px){.active-person-container .post-nav{display:block}}.active-person-container .post-nav>div{top:0;cursor:pointer;position:absolute;display:inline-block}.active-person-container .post-nav>div:focus .arrow-wrap,.active-person-container .post-nav>div:hover .arrow-wrap{border-color:#ffc732}.active-person-container .post-nav>div:focus .arrow:before,.active-person-container .post-nav>div:hover .arrow:before{box-shadow:2px 2px 0 #ffc732,3px 2px 0 #ffc732,2px 3px 0 #ffc732,3px 3px 0 #ffc732}.active-person-container .post-nav>div:focus .arrow:after,.active-person-container .post-nav>div:focus .text,.active-person-container .post-nav>div:hover .arrow:after,.active-person-container .post-nav>div:hover .text{color:#ffc732}.active-person-container .post-nav .previous{left:-8.3333333333%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.active-person-container .post-nav .next{right:8.3333333333%;-webkit-transform:translateX(50%);transform:translateX(50%)}.active-person-container .post-nav .arrow-wrap{width:70px;height:70px;display:-webkit-box;display:-ms-flexbox;display:flex;border-radius:50%;text-align:center;border:2px solid #fff;transition:border-color .2s ease-out}.active-person-container .post-nav .arrow{margin:auto;width:12px;height:12px;border:none;background:0 0;position:relative;display:inline-block}.active-person-container .post-nav .arrow:before{top:2px;right:6px;width:8px;height:8px;content:"";position:absolute;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);transition:box-shadow .2s ease-out;box-shadow:2px 2px 0 #fff,3px 2px 0 #fff,2px 3px 0 #fff,3px 3px 0 #fff}.active-person-container .post-nav .arrow:after{width:0;height:0;left:-1px;bottom:5px;content:"\2022";color:#fff;line-height:0;font-size:14px;position:absolute;transition:left .1s ease-out,bottom .1s ease-out,letter-spacing .1s ease-out,color .2s ease-out}.active-person-container .post-nav .arrow.-long{width:22px}.active-person-container .post-nav .arrow.-long:after{left:0;content:"\2022\2022\2022";text-align:right}.active-person-container .post-nav .arrow.-left{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.active-person-container .post-nav .arrow:focus,.active-person-container .post-nav .arrow:hover{outline:0}.active-person-container .post-nav .arrow:focus:after,.active-person-container .post-nav .arrow:hover:after{left:1px}.active-person-container .post-nav .arrow:focus.-long:after,.active-person-container .post-nav .arrow:hover.-long:after{left:-.19em;letter-spacing:.1em}.active-person-container .post-nav .text{color:#fff;display:block;font-size:11px;margin-top:10px;text-align:center;transition:color .2s ease-out}@media screen and (min-width:768px){.active-person-container .person-info,.active-person-container .thumb-wrap{max-width:50%;-ms-flex-preferred-size:50%;flex-basis:50%;padding-right:30px}.active-person-container .-column-right{width:83.3333333333%;padding:60px 16.6666666667% 60px 0}.active-person-container .person-title h3{margin-top:0;font-size:48px;line-height:1.25em}.active-person-container .person-title h3 .sub-title{font-size:16px;line-height:1.5em}}.site-footer{color:#fff;position:relative;background:#1e1e1e;padding:30px 30px 60px;-webkit-font-smoothing:antialiased}.site-footer .main-gutter{margin-bottom:20px}.active-person-container .site-footer .main-column-right .person-data,.site-footer .main-column-right .active-person-container .person-data,.site-footer .main-column-right .grid{-ms-flex-wrap:wrap;flex-wrap:wrap}.site-footer .main-column-right .content-left>div,.site-footer .main-column-right .content-right>div{margin-bottom:20px}.site-footer .content-right{padding-right:30px;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.site-footer .footer-logo .icon{width:100px;height:36px;fill:#fff;transition:fill .2s ease-out}.site-footer .footer-logo:focus .icon,.site-footer .footer-logo:hover .icon{fill:#ffc732}.site-footer h3{margin-top:0;font-size:11px;font-weight:700;margin-bottom:1em;font-family:Karla,Helvetica,sans-serif;text-transform:none;line-height:1.636363636em}.site-footer p{margin:0}.site-footer a,.site-footer address,.site-footer p{font-size:11px;font-weight:200;font-family:Karla,Helvetica,sans-serif;line-height:1.636363636em}.site-footer .social ul{margin:0;padding:0}.site-footer .social ul:after,.site-footer .social ul:before{content:" ";display:block;height:0;overflow:hidden}.site-footer .social ul:after{clear:both}.site-footer .social li{float:left;list-style:none}.site-footer .social li+li{margin-left:10px}.site-footer .social a{width:36px;height:36px;display:-webkit-box;display:-ms-flexbox;display:flex;background:0 0;border-radius:100%;border:2px solid #fff;transition:border-color .2s ease-out,background .2s ease-out}.site-footer .social a:focus,.site-footer .social a:hover{background:#ffc732;border-color:#ffc732}.site-footer .social a:focus .icon,.site-footer .social a:hover .icon{fill:#1e1e1e}.site-footer .social .icon{margin:auto;fill:#fff;display:block;vertical-align:top;transition:fill .2s ease-out}.site-footer .social .icon-facebook{width:6px;height:12px}.site-footer .social .icon-instagram{width:10px;height:10px}.site-footer .social .icon-twitter{width:15px;height:10px}@media screen and (min-width:768px){.site-footer .social{margin-right:20px}}.site-footer .visit{font-size:11px;font-weight:200;font-family:Karla,Helvetica,sans-serif;line-height:1.636363636em}.site-footer .visit address{font-style:normal}.site-footer .visit a{text-decoration:none}.site-footer .visit a:hover{text-decoration:underline}.site-footer .footer-pattern{left:0;bottom:0;width:100%;height:36px;position:absolute}@media screen and (min-width:768px){.site-footer{padding:24px 0 96px}.active-person-container .site-footer .person-data,.site-footer .active-person-container .person-data,.site-footer .flex-item,.site-footer .grid{display:-webkit-box;display:-ms-flexbox;display:flex}.site-footer .main-gutter{margin-bottom:0;text-align:center}.site-footer .main-column-right .content-left,.site-footer .main-column-right .content-right{max-width:100%;-ms-flex-preferred-size:100%;flex-basis:100%}.site-footer .main-column-right .content-left>div,.site-footer .main-column-right .content-right>div{margin-bottom:36px}}@media screen and (min-width:1080px){.active-person-container .site-footer .person-data,.site-footer .active-person-container .person-data,.site-footer .flex-item,.site-footer .grid{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.site-footer .main-column-right .content-left,.site-footer .main-column-right .content-right{max-width:50%;-ms-flex-preferred-size:50%;flex-basis:50%}.site-footer .main-column-right .content-left>div,.site-footer .main-column-right .content-right>div{margin-bottom:0}}.site-main .main-column-left{position:relative;text-align:center}.site-main .main-column-left .icon{width:72px;height:72px;display:none;fill:#4cba7a}@media screen and (min-width:768px){.site-main .main-column-left .icon{display:inline-block}}.site-main .header-gutter-icons{left:50%;top:-216px;display:none;position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.site-main .header-gutter-icons .icon{margin:0 auto;display:block}@media screen and (min-width:768px){.site-main .header-gutter-icons{display:block}}.active-person-container .person-title .blog .content .page-header h3,.active-person-container .person-title .page:not(.home) .content .page-header h3,.blog .content .page-header .active-person-container .person-title h3,.blog .content .page-header .stat h3,.blog .content .page-header h1,.blog .content h2,.page:not(.home) .content .page-header .active-person-container .person-title h3,.page:not(.home) .content .page-header .stat h3,.page:not(.home) .content .page-header h1,.page:not(.home) .content h2,.stat .blog .content .page-header h3,.stat .page:not(.home) .content .page-header h3{color:#4cba7a}.blog .site-main .main-column-left .icon,.page:not(.home) .site-main .main-column-left .icon{fill:#4cba7a}.active-person-container .person-title .blog .user-content h3,.active-person-container .person-title .page:not(.home) .user-content h3,.blog .user-content .active-person-container .person-title h3,.blog .user-content .stat h3,.blog .user-content h1,.blog .user-content h2,.blog .user-content h3,.blog .user-content h4,.blog .user-content h5,.blog .user-content h6,.page:not(.home) .user-content .active-person-container .person-title h3,.page:not(.home) .user-content .stat h3,.page:not(.home) .user-content h1,.page:not(.home) .user-content h2,.page:not(.home) .user-content h3,.page:not(.home) .user-content h4,.page:not(.home) .user-content h5,.page:not(.home) .user-content h6,.stat .blog .user-content h3,.stat .page:not(.home) .user-content h3{color:#4cba7a}.blog .user-content .button a,.page:not(.home) .user-content .button a{margin:30px 0;color:#4cba7a;border-color:#4cba7a}.blog .user-content .button a:focus,.blog .user-content .button a:hover,.page:not(.home) .user-content .button a:focus,.page:not(.home) .user-content .button a:hover{background:#ffc732;border-color:#ffc732}@media screen and (min-width:768px){body:not(.home) .site-main{min-height:200px}}@media screen and (min-width:768px){body:not(.home) .site-main .main-column-left.-top:before{right:0;width:50%;z-index:-1;content:"";bottom:100%;height:288px;position:absolute;background:#fff}}body:not(.home) .site-main .main-column-right{padding:30px}@media screen and (min-width:768px){body:not(.home) .site-main .main-column-right{padding:60px 30px 0 0}}body:not(.home) .site-main .main-column-right.-top{padding-bottom:0;background:#fff}@media screen and (min-width:768px){body:not(.home) .site-main .main-column-right.-top{margin-top:-288px}}body:not(.home) .site-main .main-column-right .intro-text{margin-bottom:30px}.active-person-container .person-title body:not(.home) .site-main .main-column-right .intro-text .page-header h3,.stat body:not(.home) .site-main .main-column-right .intro-text .page-header h3,body:not(.home) .site-main .main-column-right .intro-text .page-header .active-person-container .person-title h3,body:not(.home) .site-main .main-column-right .intro-text .page-header .stat h3,body:not(.home) .site-main .main-column-right .intro-text .page-header h1{margin-top:0}body:not(.home) .site-main .main-column-right .intro-text p{margin:0;font-size:18px;line-height:1.5em}@media screen and (min-width:768px){body:not(.home) .site-main .main-column-right .intro-text{max-width:670px}body:not(.home) .site-main .main-column-right .intro-text p{font-size:24px}}@media screen and (max-width:900px){body:not(.home) .site-main .main-column-right>.one-half .user-content .one-half{float:none;width:100%;max-width:none}}@media screen and (min-width:768px){body:not(.home) .site-main .main-column-right .content-left{margin-bottom:0}}body:not(.home) .site-main .secondary-content.intro-section .main-column-right{padding-top:0}body:not(.home) .site-main .secondary-content .main-column-right{padding-bottom:30px}@media screen and (min-width:768px){body:not(.home) .site-main .secondary-content .main-column-right{padding-bottom:60px}body:not(.home) .site-main .secondary-content .main-column-right .content-left{padding-right:30px}}.page-template-default .page-header{width:100%}@media screen and (min-width:768px){.home.page .site-header{position:relative}}.event-summary{color:#fff!important}.article-title{color:#4a4e53!important}.article-date{color:#fff!important;border:2px dotted #fff!important}.hljs{display:block;overflow-x:auto;padding:.5em;background:#000;color:#f8f8f8}.hljs-comment,.hljs-quote{color:#aeaeae;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#e28964}.hljs-string{color:#65b042}.hljs-subst{color:#daefa3}.hljs-link,.hljs-regexp{color:#e9c062}.hljs-name,.hljs-section,.hljs-tag,.hljs-title{color:#89bdff}.hljs-class .hljs-title,.hljs-doctag{text-decoration:underline}.hljs-bullet,.hljs-number,.hljs-symbol{color:#3387cc}.hljs-params,.hljs-template-variable,.hljs-variable{color:#3e87e3}.hljs-attribute{color:#cda869}.hljs-meta{color:#8996a8}.hljs-formula{background-color:#0e2231;color:#f8f8f8;font-style:italic}.hljs-addition{background-color:#253b22;color:#f8f8f8}.hljs-deletion{background-color:#420e09;color:#f8f8f8}.hljs-selector-class{color:#9b703f}.hljs-selector-id{color:#8b98ab}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}*{font-family:Work Sans,sans-serif}pre{background:#000;color:#f8f8f8}pre *{font-family:Consolas,Roboto Mono,Liberation Mono,Menlo,Courier,monospace}h1,h2{text-rendering:optimizeLegibility}.inverse-topper,.topper{font-size:64px;font-weight:300;letter-spacing:-2px;line-height:1em;margin:.5em 0}.inverse-topper{color:#494e52;font-size:1.7em}.hero h3{font-size:.81em;margin-top:14px;margin-top:1rem}.inverse-topper:after{content:" ";border-bottom:3px solid #fff;border-width:50%;display:block;width:98px;width:7rem;margin-top:8px;margin-top:7px;margin-top:.5rem}.markdown{margin-top:23.8px;margin-top:1.7rem}body{font-family:Work Sans,sans-serif;font-weight:300;margin:0}li a{text-decoration:none}header[role=banner]{background:#6495ed;padding:22px 0 0;margin-top:12px;height:112px;height:8rem;text-align:center;color:#fff}header[role=banner] h1{margin:0}header[role=banner] h3{font-size:37.8px;font-size:2.7rem}header{font-family:Raleway,sans-serif;font-weight:100;color:#6495ed;text-rendering:optimizeLegibility;line-height:1;margin-top:0;font-family:-apple-system,\.SFNSText-Regular,San Francisco,Roboto,Segoe UI,Helvetica Neue,Lucida Grande,Arial,sans-serif;margin-bottom:15px;color:#607d8b;font-weight:700}a{outline:none;transition:color .3s ease;text-decoration:none;color:#6495ed}h1{font-weight:300;font-size:70px;font-size:5rem;margin:0;color:#6495ed;font-weight:100;color:#442f34;color:rgba(0,0,0,.8);text-rendering:optimizeLegibility;line-height:1;text-transform:none;line-height:1.2}h3{font-size:37.8px;font-size:2.7rem;font-weight:300;line-height:1}html{font-size:14px}article,main{display:block}.content{max-width:900px}.content,.page-content{margin:14px auto;margin:1rem auto}.page-content{max-width:720px;color:"#1e1e1e1"}.page-content p{color:"#1e1e1e"!important}.post{position:relative;width:80%;margin:42px auto;margin:3rem auto;padding-bottom:42px;padding-bottom:3rem;border-bottom:1px solid #ccc;word-break:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.post-meta{display:inline-block;margin:0 0 5px;font-size:28px;font-size:2rem;color:#9eabb3;color:#ff0}.post-meta a{color:#9eabb3;text-decoration:none}.post-title{margin:0;color:#6495ed}h2{font-size:35px;font-size:2.5rem}section{max-width:960px;margin:auto}.post-excerpt p{margin:22.4px 0 0;margin:1.6rem 0 0;line-height:22.4px;line-height:1.6rem}dl,ol,p,ul{font-size:17.92px;font-size:1.28rem;line-height:1.6;color:"#1e1e1e"}header h1,header h3{color:#fff}header[role=hero]{padding:14px 0 56px;padding:1rem 0 4rem;background-color:#306ffd;background-image:linear-gradient(60deg,#306efe,#003ab7);text-align:center;color:#fff;position:relative}.h3,.h4,h3,h4{line-height:21px;line-height:1.5rem}.h3,h3{font-size:21.328px;font-size:18.662px;font-size:1.333rem;font-weight:700;text-transform:uppercase;margin-bottom:7px;margin-bottom:.5rem}h1:after{content:"";border-bottom:3px solid #6495ed;width:100%}.intro{padding-top:28px;padding-top:2rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:-.01em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.wrapper{width:90%;max-width:1092px;max-width:78rem;margin:auto}.intro .leftside{max-width:140px;max-width:10rem;width:20%}.intro .text-col{max-width:728px;max-width:52rem;width:80%;margin-right:10%}.cerico{color:#eadfc1}.authorbio{color:#7e9aa3;color:#8ab1d6;color:#707274;color:#fff;font-weight:800}.headroom-wrapper{border-top:2px solid #eadfc1}@media (max-width:768px){.authorbio{display:none}}@media only screen and (orientation:portrait){.authorbio{display:none}}.page-content a{color:#ff7980;color:#d2f0dc;text-decoration:underline}</style></head><body><div id="react-mount"><div class="content" id="blueboy" data-reactroot="" data-reactid="1" data-react-checksum="-471596830"><div style="position:relative;" data-reactid="2"><div id="hero" role="hero" class="hero" data-reactid="3"><a class="inverse-topper" href="/" data-reactid="4">Cerico</a><h3 data-reactid="5">Javascript, Docker, Elixir, Nginx, and other fun and games</h3></div><div id="add-swirl" data-reactid="6"><svg width="100%" height="47px" viewBox="0 0 1440 47" version="1.1" xmlns="http://www.w3.org/2000/svg" class="hero__div" preserveAspectRatio="xMinYMax meet" data-reactid="7"><defs data-reactid="15" data-reactid="8"><pattern id="img1" patternUnits="userSpaceOnUse" x="0" y="0" width="100" height="100" data-reactid="9"><image xlink:href="https://f001.backblazeb2.com/file/margate/sda.png" x="0" y="0" width="100" height="100" data-reactid="10"></image></pattern><pattern id="pattern1" x="10" y="10" width="20" height="20" patternUnits="userSpaceOnUse" data-reactid="11"><image id="u" xlink:href="https://f001.backblazeb2.com/file/margate/runu.png" data-reactid="12"></image><circle id="circle" cx="10" cy="10" r="100" style="opacity:0;stroke:none;fill:#0000ff;" data-reactid="13"></circle></pattern></defs><g id="Page-1" stroke="none" stroke-width="1" data-reactid="16" data-reactid="14"><path d="M0,0.0577405639 C117.504588,18.44359 269.602477,22.1720696 456.293666,11.2431795 C562.076057,5.05068514 730.784198,0.911127653 885.297232,3.27366179 C1157.17617,7.43074321 1386.98062,21.3276838 1440,38.3891927 L1440,46.9388979 L0,46.9388979 L0,0.0577405639 Z" fill="url(#pattern1)" id="Path-9" data-reactid="17" data-reactid="15"></path></g></svg></div></div><div class="clear-both" data-reactid="16"></div><div class="mini" data-reactid="17"><span style="margin-bottom:0.33rem;" data-reactid="18"><a style="display:inline-block;" href="/about/" data-reactid="19"><img src="https://s3.eu-west-2.amazonaws.com/io1937/ghpages/linkedin.jpg" style="float:left;margin-top:0;margin-bottom:0;margin-right:0.4125rem;width:6.6rem;height:6.6rem;border-radius:50%;border:1px gray solid;" data-reactid="20"/></a><div style="display:inline-block;" data-reactid="21"><span class="authorbio" data-reactid="22">garethrobertlee</span><a href="/about/" data-reactid="23"></a></div></span><div class="linx" data-reactid="24"><div class="linx" data-reactid="25"><span data-reactid="26"><a style="color:#fff;font-weight:800;" href="/" data-reactid="27"><!-- react-text: 28 -->Posts  <!-- /react-text --><br data-reactid="29"/></a><a style="color:#fff;font-weight:800;" href="/about/" data-reactid="30"><!-- react-text: 31 -->About  <!-- /react-text --><br data-reactid="32"/></a></span><a style="color:#fff;font-weight:800;" href="mailto:garethrobertlee@gmail.com?Subject=Hello" target="blank_" data-reactid="33">Contact</a></div></div></div><main class="site-main" role="main" data-reactid="34"><div class="site-grid grid" data-reactid="35"><div class="main-gutter main-column-left" data-reactid="36"><div class="header-gutter-icons" data-reactid="37"><svg class="icon icon-community" data-reactid="38"><use d="#icon-community" data-reactid="39"></use></svg><svg class="icon icon-land" data-reactid="40"><use d="#icon-land" data-reactid="41"></use></svg><svg class="icon icon-water" data-reactid="42"><use d="#icon-water" data-reactid="43"></use></svg></div><svg class="icon icon-factory" data-reactid="44"><use d="#icon-factory" data-reactid="45"></use></svg></div><div class="main-column-right grid" data-reactid="46"><div class="content-left flex-item one-half" data-reactid="47"><span style="margin-bottom:0.33rem;" data-reactid="48"><a style="display:inline-block;" href="/about/" data-reactid="49"><img src="https://s3.eu-west-2.amazonaws.com/io1937/ghpages/linkedin.jpg" style="float:left;margin-top:0;margin-bottom:0;margin-right:0.4125rem;width:6.6rem;height:6.6rem;border-radius:50%;border:1px gray solid;" data-reactid="50"/></a><div style="display:inline-block;" data-reactid="51"><span class="authorbio" data-reactid="52">garethrobertlee</span><a href="/about/" data-reactid="53"></a></div></span><div class="linx" data-reactid="54"><div class="linx" data-reactid="55"><span data-reactid="56"><a style="color:#fff;font-weight:800;" href="/" data-reactid="57"><!-- react-text: 58 -->Posts  <!-- /react-text --><br data-reactid="59"/></a><a style="color:#fff;font-weight:800;" href="/about/" data-reactid="60"><!-- react-text: 61 -->About  <!-- /react-text --><br data-reactid="62"/></a></span><a style="color:#fff;font-weight:800;" href="mailto:garethrobertlee@gmail.com?Subject=Hello" target="blank_" data-reactid="63">Contact</a></div></div></div><div class="events-list content-right flex-item one-half" data-reactid="64"><h2 data-reactid="65">Posts</h2><div class="markdown page-content" data-reactid="66"><!-- react-empty: 67 --><div data-reactid="68"><div style="font-size:1rem;color:#d2f0dc;margin-bottom:1px;text-align:right;" data-reactid="69"><!-- react-text: 70 -->2 Sep 2017<!-- /react-text --><!-- react-text: 71 --> in <!-- /react-text --><span style="display:inline;" data-reactid="72"><span style="margin-right:8px;line-height:1.2;display:inline-block;" data-reactid="73"><a style="color:#d2f0dc;display:inline-block;font-size:1rem;" href="/tags/#javascript" data-reactid="74">Javascript</a><span data-reactid="75">,</span></span><span style="margin-right:8px;line-height:1.2;display:inline-block;" data-reactid="76"><a style="color:#d2f0dc;display:inline-block;font-size:1rem;" href="/tags/#es6" data-reactid="77">ES6</a><span data-reactid="78"></span></span></span></div></div><h1 style="font-size:2.2rem;margin-bottom:1rem;margin-top:2rem;" data-reactid="79">JS Router Part Two - Refresh</h1><div data-reactid="80"><p>In part 1, our client side router works fine, and loads our html but our URL doesnât update, which means we donât have a unique address for any of our pages, weâre always at the root URL. Today weâre going to flesh out our router using pushState and HTML5âs history facility.</p>
<hr>
<h3>Pre-requisites.</h3>
<p><a href="../2017-08-26---javascript-router/">Part One</a></p>
<hr>
<h3>Updating URL</h3>
<p>There are two main ways to do this, with either hashbang URLs (eg <a href="http://url.com/#hereford">url.com/#hereford</a>), or using pushState, which gives us a standard looking URL. Lets be honest, those hashbang URLâs donât feel very solid! With pushState a client rendered URL will look the same as a server rendered one.</p>
<pre><code>â  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(six) â <span class="hljs-keyword">cat</span> src/js/delph.js
</code></pre>
<pre><code><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Delph</span> </span>{
    
    <span class="hljs-keyword">constructor</span>(routes,el){
        <span class="hljs-keyword">this</span>.routes = routes
        <span class="hljs-keyword">this</span>.el = el
    }

    load(page){ 
        
        history.pushState({ page}, <span class="hljs-literal">null</span>, <span class="hljs-string">`/<span class="hljs-subst">${page}</span>`</span>);
        <span class="hljs-keyword">let</span> route =  <span class="hljs-keyword">this</span>.routes[page];
        route.load().then(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> route.show(<span class="hljs-keyword">this</span>.el));
    }
}
</code></pre>
<p>Here we are taking the HTML5 history api and into it we push our page object, page title (null), and page url.</p>
<p><img src="https://dl.dropboxusercontent.com/s/imbm5wdf8xv7s5b/9CE60511-B1A8-4096-A439-25F2E48F5E9B-567-00000F28303615AF.gif?dl=0" alt="alt text" title="update url"></p>
<p>Repo at stage 6: <a href="https://github.com/cerico/how-to-js-router/releases/tag/0.6">https://github.com/cerico/how-to-js-router/releases/tag/0.6</a></p>
<hr>
<h3>Handling refresh and direct linking</h3>
<p>Weâre now updating the URL as part of the routerâs load function, which is only run when we click on a link. But what happens if we go to a link directly, or refresh the page. We just get the index page again, but why is this?</p>
<p>Its down to our webpack configuration, and specifically where we us historyApiFallback and rewrites. Whats actually happening is <em>whatever</em> url we put in on first load - is going to give us the index.html page - and any javascript that runs on page load. Updating the URL and changing the content are actually <em>unrelated</em> events that both happen in the routers load function, and when we go to a page directly, the URL may look right, but weâre not telling our router to load any content.</p>
<p>So we want our routerâs load function to fetch the right page on page load. We can do this by grabbing the URL on initialization of the router, and passing it to the load function</p>
<pre><code>â  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(seven) <span class="hljs-keyword">cat</span> -n src/js/<span class="hljs-built_in">index</span>.js
</code></pre>
<pre><code>   ...
     <span class="hljs-number">4</span>	<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span> </span>{
     <span class="hljs-number">5</span>
     <span class="hljs-number">6</span>	    <span class="hljs-keyword">constructor</span>(){
     <span class="hljs-number">7</span>	      <span class="hljs-keyword">const</span> page = <span class="hljs-built_in">window</span>.location.pathname.substr(<span class="hljs-number">1</span>) || <span class="hljs-string">''</span>
     <span class="hljs-number">8</span>	      <span class="hljs-keyword">let</span> main = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'main'</span>)
     <span class="hljs-number">9</span>	      <span class="hljs-keyword">this</span>.delph = <span class="hljs-keyword">new</span> Delph(routes, main, page)
    <span class="hljs-number">10</span>	      <span class="hljs-keyword">this</span>.makeHeader(routes)
    <span class="hljs-number">11</span>	    }
    ...
</code></pre>
<p>We can grab the route we want from the URL (line 7), which will give us e.g âherefordâ, âglossopâ or in the case of the root url - nothing, in which case weâll use an empty string. We can then pass this to our router (line 9)</p>
<pre><code>â  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(seven) â <span class="hljs-keyword">cat</span> src/js/delph.js
</code></pre>
<pre><code><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Delph</span> </span>{

    <span class="hljs-keyword">constructor</span>(routes,el,page){
        <span class="hljs-keyword">this</span>.routes = routes;
        <span class="hljs-keyword">this</span>.el = el;
        <span class="hljs-keyword">this</span>.load(page)
    }

    load(page){
        history.pushState({ page}, <span class="hljs-literal">null</span>, <span class="hljs-string">`/<span class="hljs-subst">${page}</span>`</span>);
        <span class="hljs-keyword">let</span> route =  <span class="hljs-keyword">this</span>.routes[page];
        route.load().then(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> route.show(<span class="hljs-keyword">this</span>.el));
    }
}
</code></pre>
<p>We can pick up the page pathname string here, and pass to the load function when initiated. Our named pages will now work with direct links and with refreshes. But now the function runs on page load, how do we handle the index route. And what about handling 404s?</p>
<p>Repo at stage 7: <a href="https://github.com/cerico/how-to-js-router/releases/tag/0.7">https://github.com/cerico/how-to-js-router/releases/tag/0.7</a></p>
<hr>
<h3>Index Route</h3>
<p>The main issue for the router now, is regarding the index route. Firstly, there isnât one in our routes object, so thereâs nothing to load. But what do we call it, as the pathname of the index route is going to be an empty string, and we have to call its html file <em>something</em>. Lets call it default, for now.</p>
<pre><code>â  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(eight) â <span class="hljs-keyword">cat</span> src/js/routes.js
</code></pre>
<pre><code><span class="hljs-keyword">import</span> { Page } <span class="hljs-keyword">from</span> <span class="hljs-string">'./page'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> routes = {
    <span class="hljs-attr">glossop</span>: <span class="hljs-keyword">new</span> Page(<span class="hljs-string">'glossop'</span>),
    <span class="hljs-attr">kendal</span>:  <span class="hljs-keyword">new</span> Page(<span class="hljs-string">'kendal'</span>),
    <span class="hljs-attr">hereford</span>:  <span class="hljs-keyword">new</span> Page(<span class="hljs-string">'hereford'</span>),
    <span class="hljs-attr">malton</span>:  <span class="hljs-keyword">new</span> Page(<span class="hljs-string">'malton'</span>),
    <span class="hljs-string">''</span> : <span class="hljs-keyword">new</span> Page(<span class="hljs-string">'default'</span>)
}
</code></pre>
<p>And create a default view for it to load - and weâll create the 404 view at the same time.</p>
<pre><code>â  how-to-js-router git:(eight) â cat src/views/default<span class="hljs-selector-class">.html</span>
<span class="hljs-selector-tag">i</span> am m the homepage
</code></pre>
<p>But as the text for the link for the default route is just an empty string, we have nothing to click on.</p>
<pre><code> how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(eight) â <span class="hljs-keyword">cat</span> -n src/js/<span class="hljs-built_in">index</span>.js
</code></pre>
<pre><code>    ...
    <span class="hljs-number">13</span>	    makeHeader(routes){
    <span class="hljs-number">14</span>	      <span class="hljs-keyword">let</span> el = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'header'</span>)
    <span class="hljs-number">15</span>	      <span class="hljs-built_in">Object</span>.keys(routes).map(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
    <span class="hljs-number">16</span>	        <span class="hljs-keyword">let</span> e = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"li"</span>);
    <span class="hljs-number">17</span>	        e.innerHTML = route || <span class="hljs-string">"index"</span>
    ...
</code></pre>
<p>So in the case of an our named route being an empty string, we can just use âindexâ for the text of the link, but still pass the load function the ârealâ empty string, to tally up with the routes object.</p>
<p>Repo at stage 8: <a href="https://github.com/cerico/how-to-js-router/releases/tag/0.8">https://github.com/cerico/how-to-js-router/releases/tag/0.8</a></p>
<hr>
<h3>404</h3>
<p>Now the index route is fixed, but the router breaks if we type in the wrong pathname, we have no 404. Simple enough to fix, we need a 404 html file, and a catch in the routerâs load function, to show it when a named route canât be found.</p>
<pre><code>â  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(nine) â <span class="hljs-keyword">cat</span> src/js/delph.js
</code></pre>
<pre><code><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Delph</span> </span>{
    
    <span class="hljs-keyword">constructor</span>(routes,el,page){
        <span class="hljs-keyword">this</span>.routes = routes;
        <span class="hljs-keyword">this</span>.el = el;
        <span class="hljs-keyword">this</span>.load(page)
    }

    load(page){
        history.pushState({ page}, <span class="hljs-literal">null</span>, <span class="hljs-string">`/<span class="hljs-subst">${page}</span>`</span>);
        <span class="hljs-built_in">console</span>.log(page)
        <span class="hljs-keyword">let</span> route =  <span class="hljs-keyword">this</span>.routes[page];
        <span class="hljs-keyword">if</span> (route) {
            route.load().then(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> route.show(<span class="hljs-keyword">this</span>.el));
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.el.innerHTML = <span class="hljs-string">"no page found"</span>
        }
    }
}
</code></pre>
<p>If weâre unable to find a route in the routes object(due to mistyped link), we can simply attach an error message to the element</p>
<p>Repo at stage 9: <a href="https://github.com/cerico/how-to-js-router/releases/tag/0.9">https://github.com/cerico/how-to-js-router/releases/tag/0.9</a></p>
<hr>
<h3>The Back Button</h3>
<p>Try clicking the back buttonâ¦and nothing happens. And people really love the back button! The URL updates, but the content doesnât change</p>
<p>vid</p>
<p>If we remember from before, the URL updating and the content loading are unrelated events that both happen during the routerâs load function, giving the appearance of being connected. The URL changing is part of HTML5âs History API, so lets hook into that and change the content whenever it updates.</p>
<pre><code>â  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(ten) <span class="hljs-keyword">cat</span> -n src/js/delph.js
</code></pre>
<pre><code>     <span class="hljs-number">1</span>	export class Delph {
     <span class="hljs-number">2</span>
     <span class="hljs-number">3</span>	  constructor(routes,el,page){
     <span class="hljs-number">4</span>	    this.routes = routes;
     <span class="hljs-number">5</span>	    this.el = el;
     <span class="hljs-number">6</span>	    this.load(page)
     <span class="hljs-number">7</span>	    this.handleBackButton()
     <span class="hljs-number">8</span>	  }
     <span class="hljs-number">9</span>
    <span class="hljs-number">10</span>	  handleBackButton(){
    <span class="hljs-number">11</span>	    window.onpopstate = () =&gt; {
    <span class="hljs-number">12</span>	      let content = <span class="hljs-string">""</span>;
    <span class="hljs-number">13</span>	      if (event.<span class="hljs-section">state</span>) {
    <span class="hljs-number">14</span>	        content = event.<span class="hljs-section">state</span>.page;
    <span class="hljs-number">15</span>	        this.load(content)
    <span class="hljs-number">16</span>	      }
    <span class="hljs-number">17</span>	    }
    <span class="hljs-number">18</span>	  }
    ...
</code></pre>
<p>Weâve written a new âhandleBackButtonâ function, and we initiate it when the router is initiated. window.onpopstate is part of the HTML5 API, which we can run in this function. When the back button is pressed, the event listener is triggered and we have access to the previous pageâs pathname. We can simply feed this to the load function, the same as if we were just clicking a link.</p>
<p>However, if we use the back button consecutively, no changes are registered after the first press, because the load function is immediately updating the pushState again, so we want to disable that from happening. Lets pass the load function a second argument, true (for back button pressed. And then only update pushState when this isnât the case.</p>
<pre><code>â  how-to-js-router git:(master) cat -n src/js/delph.js
     <span class="hljs-number">1</span>	<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Delph</span> </span>{
     <span class="hljs-number">2</span>
     <span class="hljs-number">3</span>	  <span class="hljs-keyword">constructor</span>(routes,el,page){
     <span class="hljs-number">4</span>	    <span class="hljs-keyword">this</span>.routes = routes;
     <span class="hljs-number">5</span>	    <span class="hljs-keyword">this</span>.el = el;
     <span class="hljs-number">6</span>	    <span class="hljs-keyword">this</span>.load(page)
     <span class="hljs-number">7</span>	    <span class="hljs-keyword">this</span>.handleBackButton()
     <span class="hljs-number">8</span>	  }
     <span class="hljs-number">9</span>
    <span class="hljs-number">10</span>	  handleBackButton(){
    <span class="hljs-number">11</span>	    <span class="hljs-built_in">window</span>.onpopstate = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-number">12</span>	      <span class="hljs-keyword">let</span> content = <span class="hljs-string">""</span>;
    <span class="hljs-number">13</span>	      <span class="hljs-keyword">if</span> (event.state) {
    <span class="hljs-number">14</span>	        content = event.state.page;
    <span class="hljs-number">15</span>	        <span class="hljs-keyword">this</span>.load(content, <span class="hljs-literal">true</span>)
    <span class="hljs-number">16</span>	      }
    <span class="hljs-number">17</span>	    }
    <span class="hljs-number">18</span>	  }
    <span class="hljs-number">19</span>
    <span class="hljs-number">20</span>	  load(page, backButtonUsed){
    <span class="hljs-number">21</span>	    <span class="hljs-keyword">if</span> (!backButtonUsed){
    <span class="hljs-number">22</span>	      history.pushState({ page}, <span class="hljs-literal">null</span>, <span class="hljs-string">`/<span class="hljs-subst">${page}</span>`</span>);
    <span class="hljs-number">23</span>	    }
</code></pre>
<p>Repo at stage 10: <a href="https://github.com/cerico/how-to-js-router/releases/tag/0.10.1">https://github.com/cerico/how-to-js-router/releases/tag/0.10.1</a></p>
<p>__</p>
<h3>Using Express</h3>
<p>So, our router works in the dev environment, but we donât want to use webpack in production, weâll use express. So first weâll need to install express and path, and create a build script and a production script.</p>
<pre><code>â  how-to-js-router git:(eleven-express) â cat -n package.json
     ...
      <span class="hljs-number">6</span>	  <span class="hljs-string">"scripts"</span>: {
     <span class="hljs-number">7</span>	    <span class="hljs-string">"dev"</span>: <span class="hljs-string">"webpack-dev-server --config webpack/webpack.config.js --open"</span>,
     <span class="hljs-number">8</span>	    <span class="hljs-string">"build"</span>: <span class="hljs-string">"webpack --config webpack/webpack.prod.config.js"</span>,
     <span class="hljs-number">9</span>	    <span class="hljs-string">"prod"</span>: <span class="hljs-string">"node server.js"</span>
    <span class="hljs-number">10</span>	  },
    ...
    <span class="hljs-number">21</span>	  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-number">22</span>	    <span class="hljs-string">"webpack"</span>: <span class="hljs-string">"^3.5.5"</span>,
    <span class="hljs-number">23</span>	    <span class="hljs-string">"webpack-dev-server"</span>: <span class="hljs-string">"^2.7.1"</span>
    <span class="hljs-number">24</span>	  },
    <span class="hljs-number">25</span>	  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-number">26</span>	    <span class="hljs-string">"path"</span>: <span class="hljs-string">"^0.12.7"</span>,
    <span class="hljs-number">27</span>	    <span class="hljs-string">"express"</span>: <span class="hljs-string">"^4.15.3"</span>
    <span class="hljs-number">28</span>	  }
    <span class="hljs-number">29</span>	}
    ...
</code></pre>
<p>Production webpack build is very similar to our existing one</p>
<pre><code>â  how-to-js-router git:(eleven-express) â cat webpack/webpack<span class="hljs-selector-class">.prod</span><span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span>
</code></pre>
<pre><code><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">options</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/js/index.js'</span>,
    <span class="hljs-attr">output</span>: {
      <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">'../'</span>, <span class="hljs-string">'/dist'</span>),
      <span class="hljs-attr">filename</span>: <span class="hljs-string">'bundle.js'</span>,
    }
  }
} 
</code></pre>
<p>Weâll also need to temporaily copy our index.html file into dist, as thats what express is going to serve We need to use path to get an absolute location for the production bundle (in this case, our current directory, then one level up, then dist)</p>
<pre><code>â  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(eleven-express) â <span class="hljs-keyword">cat</span> server.js
</code></pre>
<pre><code><span class="hljs-keyword">const</span> express = require(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> server = express();

server.use(express.<span class="hljs-keyword">static</span>(<span class="hljs-string">'dist'</span>));
server.<span class="hljs-built_in">listen</span>(<span class="hljs-built_in">process</span>.env.PORT || <span class="hljs-number">5000</span>);
</code></pre>
<p>This serves our production bundle on port 5000 - all good, except it doesnât handle refresh or direct linking. If we remember back to the dev webpack, we had a historyApiFallback rewrite function, sending all requests initiall to index.html, now we need to do something similar here as well. A package we can use for this is connect-history-api-fallback.</p>
<pre><code>how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(dev) â npm install connect-<span class="hljs-keyword">history</span>-api-fallback
</code></pre>
<p>Weâll add this to the server.js file and use itâ¦</p>
<pre><code>â  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(kstephen) â <span class="hljs-keyword">cat</span> server.js
</code></pre>
<pre><code><span class="hljs-keyword">const</span> express = <span class="hljs-keyword">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> history = <span class="hljs-keyword">require</span>(<span class="hljs-string">'connect-history-api-fallback'</span>)
<span class="hljs-keyword">const</span> server = express();
<span class="hljs-keyword">const</span> staticFileMiddleware = express.<span class="hljs-keyword">static</span>(<span class="hljs-string">'dist'</span>);
server.<span class="hljs-keyword">use</span>(staticFileMiddleware);
server.<span class="hljs-keyword">use</span>(history({
  disableDotRule: <span class="hljs-keyword">true</span>,
  verbose: <span class="hljs-keyword">true</span>
}));
server.<span class="hljs-keyword">use</span>(staticFileMiddleware);
server.listen(process.env.PORT || <span class="hljs-number">5000</span>);
</code></pre>
<hr>
<h3>Handling static assets</h3>
<p>Our HTML files arenât being bundled, so weâll need to make sure they are accessible to the production build. So we can add a new npm script âcopy-filesâ, which can run every time a build finishes.</p>
<pre><code>â  how-<span class="hljs-keyword">to</span>-js-router gi<span class="hljs-variable">t:</span>(kstephen) â <span class="hljs-keyword">cat</span> -n package.json
</code></pre>
<pre><code>...
     <span class="hljs-number">6</span>	  <span class="hljs-string">"scripts"</span>: {
     <span class="hljs-number">7</span>	    <span class="hljs-string">"dev"</span>: <span class="hljs-string">"webpack-dev-server --config webpack/webpack.config.js --open"</span>,
     <span class="hljs-number">8</span>	    <span class="hljs-string">"build"</span>: <span class="hljs-string">"webpack --config webpack/webpack.prod.config.js &amp;&amp; npm run copy-files"</span>,
     <span class="hljs-number">9</span>	    <span class="hljs-string">"copy-files"</span>: <span class="hljs-string">"cp src/index.html dist &amp;&amp; cp -r views dist"</span>,
    <span class="hljs-number">10</span>	    <span class="hljs-string">"prod"</span>: <span class="hljs-string">"node server.js"</span>
    <span class="hljs-number">11</span>	  }
    ...
</code></pre>
<p>This will give us the following structure for the production build, and copying these files as part of the build process means we only need to worry about maintaining one set.</p>
<pre><code>â  how-to-js-router git:(kstephen) â tree dist
dist
âââ bundle<span class="hljs-selector-class">.js</span>
âââ index<span class="hljs-selector-class">.html</span>
âââ views
    âââ default<span class="hljs-selector-class">.html</span>
    âââ glossop<span class="hljs-selector-class">.html</span>
    âââ hereford<span class="hljs-selector-class">.html</span>
    âââ kendal<span class="hljs-selector-class">.html</span>
    âââ malton<span class="hljs-selector-class">.html</span>

<span class="hljs-number">1</span> directory, <span class="hljs-number">7</span> files
</code></pre>
<hr>
<h3>Gotchas - File Locations</h3>
<p>Caveat, as weâre only maintaining one set of html files, and copying them from to dist as part of the build process, we have to make sure we remove any reference to âsrcâ in our js files. The views will be at the top level, which in dev with webpack will be the top level of the repo, but in production, âdistâ will be the top level, as thats where we are telling node to serve static assets from. This is best illustrated by tree.</p>
<pre><code>â  how-to-js-router git:(kstephen) â tree | more
.
âââ README.md
âââ dist
âÂ Â  âââ bundle.js
âÂ Â  âââ <span class="hljs-keyword">index</span>.html
âÂ Â  âââ views
âÂ Â      âââ <span class="hljs-keyword">default</span>.html
âÂ Â      âââ glossop.html
âÂ Â      âââ hereford.html
âÂ Â      âââ kendal.html
âÂ Â      âââ malton.html
...
âââ <span class="hljs-keyword">server</span>.js
âââ src
âÂ Â  âââ <span class="hljs-keyword">index</span>.html
âÂ Â  âââ js
âÂ Â      âââ delph.js
âÂ Â      âââ <span class="hljs-keyword">index</span>.js
âÂ Â      âââ page.js
âÂ Â      âââ routes.js
âââ views
âÂ Â  âââ <span class="hljs-keyword">default</span>.html
âÂ Â  âââ glossop.html
âÂ Â  âââ hereford.html
âÂ Â  âââ kendal.html
âÂ Â  âââ malton.html
âââ webpack
    âââ webpack.config.js
    âââ webpack.prod.config.js
</code></pre>
<p>In both dev and prod, we want to make sure fetch is retrieving from the top level, so hereâs where we want to make sure there are no references to âsrcâ.</p>
<pre><code>â  how-to-js-router git:(kstephen) â cat -n src/js/page.js
     1	<span class="hljs-builtin-name">export</span> class<span class="hljs-built_in"> Page </span>{
     2	  constructor(url) {
     3	    this.url = `views/<span class="hljs-variable">${url}</span>.html`;
<span class="hljs-built_in">..</span>.
</code></pre>
<p>Repo at stage 11: <a href="https://github.com/cerico/how-to-js-router/releases/tag/0.11.1">https://github.com/cerico/how-to-js-router/releases/tag/0.11.1</a></p>
<hr>
<h3>Next</h3>
<p>This is fine, but we can do better. We have our html files being retrieved by fetch, outside our man bundle. Wouldnât it be better if we included them as part of our bundle and bypassed fetch altogether. The answer is yes! Lets do that in part 3, with web components.</p>
<p><a href="../2017-09-11---introducing-web-components/">Part Three</a></p>
</div><div data-reactid="81"><span style="display:inline;" data-reactid="82"><span style="margin-right:8px;line-height:1.2;display:inline-block;" data-reactid="83"><a style="color:#d2f0dc;display:inline-block;font-size:1rem;" href="/tags/#javascript" data-reactid="84">Javascript</a><span data-reactid="85">,</span></span><span style="margin-right:8px;line-height:1.2;display:inline-block;" data-reactid="86"><a style="color:#d2f0dc;display:inline-block;font-size:1rem;" href="/tags/#es6" data-reactid="87">ES6</a><span data-reactid="88"></span></span></span><hr style="margin-top:1.07rem;" data-reactid="89"/><span style="margin-bottom:0.33rem;" data-reactid="90"><a style="display:inline-block;" href="/about/" data-reactid="91"><img src="https://s3.eu-west-2.amazonaws.com/io1937/ghpages/linkedin.jpg" style="float:left;margin-top:0;margin-bottom:0;margin-right:0.4125rem;width:6.6rem;height:6.6rem;border-radius:50%;border:1px gray solid;" data-reactid="92"/></a><div style="display:inline-block;" data-reactid="93"><span class="authorbio" data-reactid="94">garethrobertlee</span><a href="/about/" data-reactid="95"></a></div></span><div class="linx" data-reactid="96"><div class="linx" data-reactid="97"><span data-reactid="98"><a style="color:#fff;font-weight:800;" href="/" data-reactid="99"><!-- react-text: 100 -->Posts  <!-- /react-text --><br data-reactid="101"/></a><a style="color:#fff;font-weight:800;" href="/about/" data-reactid="102"><!-- react-text: 103 -->About  <!-- /react-text --><br data-reactid="104"/></a></span><a style="color:#fff;font-weight:800;" href="mailto:garethrobertlee@gmail.com?Subject=Hello" target="blank_" data-reactid="105">Contact</a></div></div></div></div></div></div></div></main><footer class="site-footer" role="contentinfo" data-reactid="106"><svg width="100%" height="47px" viewBox="0 0 1440 100" version="1.1" xmlns="http://www.w3.org/2000/svg" class="hero__divu" preserveAspectRatio="none" data-reactid="107"><path transform="scale(1, -1) translate(0, -47)" d="M0,0.0577405639 C117.504588,18.44359 269.602477,22.1720696 456.293666,11.2431795 C562.076057,5.05068514 730.784198,0.911127653 885.297232,3.27366179 C1157.17617,7.43074321 1386.98062,21.3276838 1440,38.3891927 L1440,46.9388979 L0,46.9388979 L0,0.0577405639 Z" id="Path-9" fill="#9fcae3" data-reactid="19" data-reactid="108"></path></svg></footer></div></div><script src="/bundle.js?t=1508171973640"></script></body></html>